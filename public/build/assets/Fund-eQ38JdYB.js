import{d as at,C as lt,g as nt,m as c,s as W,D as ot,r as i,c as A,o as p,a as e,u as v,h as st,w as a,b as l,j as T,k as P,e as n,t as d,F as q,f as it,y as rt,q as ut,_ as dt}from"./app-l1FaofIK.js";import{_ as ct}from"./CustomerLayout.vue_vue_type_script_setup_true_lang-BP7nN2jy.js";import"./index-BW5IY9go.js";const mt={class:"mb-6"},pt={class:"d-flex align-center justify-space-between mb-4"},vt={class:"text-h6 font-weight-bold mb-1"},ft={key:0,class:"text-center py-8"},bt={key:1,class:"text-center py-6"},yt={key:2},gt={class:"d-flex align-center"},_t={class:"mb-4 pa-3 bg-grey-lighten-5 rounded"},xt={class:"d-flex align-center justify-space-between"},kt={class:"text-subtitle-1 font-weight-medium mb-0"},wt={class:"mb-4 pa-3 bg-grey-lighten-5 rounded"},Ct={class:"d-flex align-center justify-space-between"},At={class:"text-h6 font-weight-bold mb-0 font-mono"},Vt={class:"mb-4 pa-3 bg-grey-lighten-5 rounded"},Tt={class:"d-flex align-center justify-space-between"},Dt={class:"text-subtitle-1 font-weight-medium mb-0"},Ft={class:"text-caption mb-0"},Bt={class:"text-center mb-6 pa-4 bg-grey-lighten-4 rounded-lg"},Nt={class:"text-h4 font-weight-bold text-primary mb-0"},$t={class:"d-flex align-center"},zt={class:"d-flex align-center"},jt={class:"text-caption text-grey"},Pt={class:"text-body-2 font-weight-medium mb-2"},Mt={class:"text-caption text-grey text-center mt-4"},St={class:"text-caption mb-0"},Ut=at({__name:"Fund",props:{user:{},wallet:{}},setup(I){const G=lt(),m=nt({amount:0}),V=c(null),f=c(null),b=c(null),w=c("paystack"),M=c([]),D=c(!1),F=c(!1),y=c(!1),B=c("wema-bank"),g=c(null),L=[1e3,2e3,5e3,1e4,2e4,5e4],_=W(()=>M.value.find(o=>o.active)),x=W(()=>!!_.value);ot(()=>{const o=G.props.flash;o?.success&&(f.value=o.success,setTimeout(()=>f.value=null,5e3)),o?.error&&(b.value=o.error,setTimeout(()=>b.value=null,5e3)),S()});const S=async()=>{D.value=!0;try{const t=await(await fetch("/customer/payment/dedicated-accounts")).json();t.success&&(M.value=t.accounts)}catch(o){console.error("Failed to fetch accounts:",o)}finally{D.value=!1}},Q=()=>{F.value=!0,ut.post("/customer/payment/dedicated-account/create",{preferred_bank:B.value},{onSuccess:()=>{y.value=!1,S(),f.value="Dedicated account created successfully!",setTimeout(()=>f.value=null,5e3)},onError:o=>{b.value=o.error||"Failed to create account",setTimeout(()=>b.value=null,5e3)},onFinish:()=>{F.value=!1}})},U=async(o,t)=>{try{await navigator.clipboard.writeText(o),g.value=t,setTimeout(()=>g.value=null,2e3)}catch(u){console.error("Failed to copy:",u)}},H=o=>{V.value=o,m.amount=o},N=o=>new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN",minimumFractionDigits:0}).format(o||0),J=()=>{w.value==="paystack"&&m.post("/customer/payment/initialize")};return(o,t)=>{const u=i("v-btn"),k=i("v-alert"),r=i("v-icon"),$=i("v-divider"),K=i("v-progress-circular"),z=i("v-card-text"),C=i("v-card"),j=i("v-col"),Y=i("v-row"),O=i("v-text-field"),E=i("v-radio"),R=i("v-radio-group"),X=i("v-card-title"),Z=i("v-select"),h=i("v-spacer"),tt=i("v-card-actions"),et=i("v-dialog");return p(),A(q,null,[e(v(st),{title:"Fund Wallet - EaseVerifier"}),e(ct,{user:o.$page.props.auth.user,wallet:o.$page.props.auth.wallet},{default:a(()=>[l("div",mt,[e(u,{variant:"text","prepend-icon":"mdi-arrow-left",href:"/customer/wallet",class:"mb-2"},{default:a(()=>[...t[12]||(t[12]=[n(" Back to Wallet ",-1)])]),_:1}),t[13]||(t[13]=l("h1",{class:"text-h4 font-weight-bold mb-1"},"Fund Your Wallet",-1)),t[14]||(t[14]=l("p",{class:"text-body-2 text-grey"},"Add funds to your wallet to start verifying",-1))]),f.value?(p(),T(k,{key:0,type:"success",variant:"tonal",closable:"",class:"mb-4","onClick:close":t[0]||(t[0]=s=>f.value=null)},{default:a(()=>[n(d(f.value),1)]),_:1})):P("",!0),b.value?(p(),T(k,{key:1,type:"error",variant:"tonal",closable:"",class:"mb-4","onClick:close":t[1]||(t[1]=s=>b.value=null)},{default:a(()=>[n(d(b.value),1)]),_:1})):P("",!0),e(Y,null,{default:a(()=>[e(j,{cols:"12",lg:"5"},{default:a(()=>[e(C,{class:"mb-4"},{default:a(()=>[e(z,{class:"pa-6"},{default:a(()=>[l("div",pt,[l("div",null,[l("h3",vt,[e(r,{color:"primary",class:"mr-2"},{default:a(()=>[...t[15]||(t[15]=[n("mdi-bank",-1)])]),_:1}),t[16]||(t[16]=n(" Dedicated Account ",-1))]),t[17]||(t[17]=l("p",{class:"text-caption text-grey mb-0"}," Your personal bank account for instant funding ",-1))])]),e($,{class:"mb-4"}),D.value?(p(),A("div",ft,[e(K,{indeterminate:"",color:"primary"}),t[18]||(t[18]=l("p",{class:"text-caption text-grey mt-2"},"Loading account...",-1))])):x.value?(p(),A("div",yt,[e(k,{color:"success",variant:"tonal",class:"mb-4"},{default:a(()=>[l("div",gt,[e(r,{class:"mr-2"},{default:a(()=>[...t[23]||(t[23]=[n("mdi-check-circle",-1)])]),_:1}),t[24]||(t[24]=l("span",{class:"text-caption"},"Account Active",-1))])]),_:1}),l("div",_t,[t[25]||(t[25]=l("p",{class:"text-caption text-grey mb-1"},"Bank Name",-1)),l("div",xt,[l("p",kt,d(_.value.bank_name),1)])]),l("div",wt,[t[26]||(t[26]=l("p",{class:"text-caption text-grey mb-1"},"Account Number",-1)),l("div",Ct,[l("p",At,d(_.value.account_number),1),e(u,{size:"small",variant:"text",color:g.value==="account_number"?"success":"primary",onClick:t[3]||(t[3]=s=>U(_.value.account_number,"account_number"))},{default:a(()=>[e(r,null,{default:a(()=>[n(d(g.value==="account_number"?"mdi-check":"mdi-content-copy"),1)]),_:1})]),_:1},8,["color"])])]),l("div",Vt,[t[27]||(t[27]=l("p",{class:"text-caption text-grey mb-1"},"Account Name",-1)),l("div",Tt,[l("p",Dt,d(_.value.account_name),1),e(u,{size:"small",variant:"text",color:g.value==="account_name"?"success":"primary",onClick:t[4]||(t[4]=s=>U(_.value.account_name,"account_name"))},{default:a(()=>[e(r,null,{default:a(()=>[n(d(g.value==="account_name"?"mdi-check":"mdi-content-copy"),1)]),_:1})]),_:1},8,["color"])])]),e(k,{color:"info",variant:"tonal",density:"compact"},{default:a(()=>[l("p",Ft,[e(r,{size:"small",class:"mr-1"},{default:a(()=>[...t[28]||(t[28]=[n("mdi-information",-1)])]),_:1}),t[29]||(t[29]=n(" Transfer any amount to this account and your wallet will be credited instantly ",-1))])]),_:1})])):(p(),A("div",bt,[e(r,{size:"64",color:"grey-lighten-1",class:"mb-3"},{default:a(()=>[...t[19]||(t[19]=[n("mdi-bank-outline",-1)])]),_:1}),t[21]||(t[21]=l("h4",{class:"text-subtitle-1 font-weight-medium mb-2"},"No Dedicated Account",-1)),t[22]||(t[22]=l("p",{class:"text-caption text-grey mb-4"}," Create a dedicated bank account to receive instant wallet funding via bank transfer ",-1)),e(u,{color:"primary",variant:"flat","prepend-icon":"mdi-plus",onClick:t[2]||(t[2]=s=>y.value=!0)},{default:a(()=>[...t[20]||(t[20]=[n(" Create Account ",-1)])]),_:1})]))]),_:1})]),_:1})]),_:1}),e(j,{cols:"12",lg:"7"},{default:a(()=>[e(C,null,{default:a(()=>[e(z,{class:"pa-6"},{default:a(()=>[l("div",Bt,[t[30]||(t[30]=l("p",{class:"text-caption text-grey mb-1"},"Current Balance",-1)),l("p",Nt,d(N(I.wallet?.total_balance||0)),1)]),t[41]||(t[41]=l("p",{class:"text-subtitle-2 font-weight-medium mb-3"},"Quick Select",-1)),e(Y,{class:"mb-6"},{default:a(()=>[(p(),A(q,null,it(L,s=>e(j,{key:s,cols:"4"},{default:a(()=>[e(u,{block:"",variant:V.value===s?"flat":"outlined",color:V.value===s?"primary":void 0,onClick:Yt=>H(s)},{default:a(()=>[n(d(N(s)),1)]),_:2},1032,["variant","color","onClick"])]),_:2},1024)),64))]),_:1}),e(O,{modelValue:v(m).amount,"onUpdate:modelValue":[t[5]||(t[5]=s=>v(m).amount=s),t[6]||(t[6]=s=>V.value=null)],label:"Enter Amount",type:"number",variant:"outlined","prepend-inner-icon":"mdi-currency-ngn","error-messages":v(m).errors.amount,hint:"Minimum: â‚¦100",class:"mb-4"},null,8,["modelValue","error-messages"]),t[42]||(t[42]=l("p",{class:"text-subtitle-2 font-weight-medium mb-3"},"Payment Method",-1)),e(R,{modelValue:w.value,"onUpdate:modelValue":t[7]||(t[7]=s=>w.value=s),class:"mb-6"},{default:a(()=>[e(C,{variant:"outlined",class:"mb-2 pa-3"},{default:a(()=>[e(E,{value:"paystack"},{label:a(()=>[l("div",$t,[e(r,{color:"primary",class:"mr-2"},{default:a(()=>[...t[31]||(t[31]=[n("mdi-credit-card",-1)])]),_:1}),t[32]||(t[32]=l("div",null,[l("p",{class:"font-weight-medium mb-0"},"Paystack"),l("p",{class:"text-caption text-grey"},"Card, Bank Transfer, USSD")],-1))])]),_:1})]),_:1}),e(C,{variant:"outlined",class:rt(["pa-3",{"opacity-50":!x.value}])},{default:a(()=>[e(E,{value:"bank",disabled:!x.value},{label:a(()=>[l("div",zt,[e(r,{color:x.value?"primary":"grey",class:"mr-2"},{default:a(()=>[...t[33]||(t[33]=[n(" mdi-bank ",-1)])]),_:1},8,["color"]),l("div",null,[t[34]||(t[34]=l("p",{class:"font-weight-medium mb-0"},"Direct Bank Transfer",-1)),l("p",jt,d(x.value?"Use your dedicated account":"Create dedicated account first"),1)])])]),_:1},8,["disabled"])]),_:1},8,["class"])]),_:1},8,["modelValue"]),w.value==="paystack"?(p(),T(u,{key:0,block:"",color:"primary",size:"x-large",loading:v(m).processing,disabled:!v(m).amount||v(m).amount<100,onClick:J},{default:a(()=>[e(r,{start:""},{default:a(()=>[...t[35]||(t[35]=[n("mdi-wallet-plus",-1)])]),_:1}),n(" Pay "+d(N(v(m).amount)),1)]),_:1},8,["loading","disabled"])):w.value==="bank"&&x.value?(p(),T(k,{key:1,color:"info",variant:"tonal",class:"mb-0"},{default:a(()=>[l("p",Pt,[e(r,{class:"mr-1"},{default:a(()=>[...t[36]||(t[36]=[n("mdi-information",-1)])]),_:1}),t[37]||(t[37]=n(" Transfer Instructions ",-1))]),t[38]||(t[38]=l("p",{class:"text-caption mb-2"},[n(" 1. Transfer any amount to your dedicated account shown on the left"),l("br"),n(" 2. Your wallet will be credited automatically within seconds"),l("br"),n(" 3. No need to click any button - it's automatic! ")],-1))]),_:1})):P("",!0),l("p",Mt,[e(r,{size:"small"},{default:a(()=>[...t[39]||(t[39]=[n("mdi-lock",-1)])]),_:1}),t[40]||(t[40]=n(" Secured by Paystack. Your payment information is encrypted. ",-1))])]),_:1})]),_:1})]),_:1})]),_:1}),e(et,{modelValue:y.value,"onUpdate:modelValue":t[11]||(t[11]=s=>y.value=s),"max-width":"500"},{default:a(()=>[e(C,null,{default:a(()=>[e(X,{class:"d-flex align-center justify-space-between pa-4"},{default:a(()=>[t[44]||(t[44]=l("span",{class:"text-h6 font-weight-bold"},"Create Dedicated Account",-1)),e(u,{icon:"",variant:"text",size:"small",onClick:t[8]||(t[8]=s=>y.value=!1)},{default:a(()=>[e(r,null,{default:a(()=>[...t[43]||(t[43]=[n("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),e($),e(z,{class:"pa-6"},{default:a(()=>[e(k,{color:"info",variant:"tonal",density:"compact",class:"mb-4"},{default:a(()=>[l("p",St,[e(r,{size:"small",class:"mr-1"},{default:a(()=>[...t[45]||(t[45]=[n("mdi-information",-1)])]),_:1}),t[46]||(t[46]=n(" A unique bank account will be created for you. You can transfer money to this account anytime to fund your wallet instantly. ",-1))])]),_:1}),e(Z,{modelValue:B.value,"onUpdate:modelValue":t[9]||(t[9]=s=>B.value=s),label:"Preferred Bank",items:[{title:"Wema Bank",value:"wema-bank"},{title:"Titan Trust Bank (Paystack)",value:"titan-paystack"}],variant:"outlined",hint:"Choose your preferred bank provider","persistent-hint":""},null,8,["modelValue"])]),_:1}),e($),e(tt,{class:"pa-4"},{default:a(()=>[e(h),e(u,{variant:"text",onClick:t[10]||(t[10]=s=>y.value=!1)},{default:a(()=>[...t[47]||(t[47]=[n(" Cancel ",-1)])]),_:1}),e(u,{color:"primary",variant:"flat",loading:F.value,onClick:Q},{default:a(()=>[e(r,{start:""},{default:a(()=>[...t[48]||(t[48]=[n("mdi-plus",-1)])]),_:1}),t[49]||(t[49]=n(" Create Account ",-1))]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["user","wallet"])],64)}}}),It=dt(Ut,[["__scopeId","data-v-6c7c84ae"]]);export{It as default};
