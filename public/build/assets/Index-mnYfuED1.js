import{d as I,i as _,j as W,u as j,k as E,l as J,r as o,c as L,o as M,a as t,b as i,h as P,w as l,e as n,f as s,t as d,F as T}from"./app-DpDICM9z.js";import{_ as q}from"./AdminLayout.vue_vue_type_script_setup_true_lang-CNWn1e1U.js";import"./index-Dz1Zefys.js";const H={class:"d-flex align-center mb-6"},K={class:"d-flex align-center py-2"},O={class:"font-weight-medium mb-0"},Q={class:"text-caption text-grey"},R={class:"font-weight-bold text-primary"},X={class:"mb-4"},ae=I({__name:"Index",props:{user:{},customers:{},filters:{}},setup(y){const v=y,f=_(v.filters?.search||""),w=_(v.customers?.current_page||1),c=_(!1),b=_(null);W(()=>v.customers?.last_page||1);const r=j({amount:0,description:"",is_bonus:!1});E(f,u=>{w.value=1,J.get("/admin/customers",{search:u||void 0,page:1},{preserveState:!0,replace:!0})});const k=u=>{b.value=u,c.value=!0},N=()=>{r.post(`/admin/customers/${b.value.id}/wallet/credit`,{onSuccess:()=>{c.value=!1,r.reset()}})},D=u=>new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN",minimumFractionDigits:0}).format(u||0),$=[{title:"Customer",key:"name"},{title:"Company",key:"company"},{title:"Wallet Balance",key:"balance"},{title:"Status",key:"status"},{title:"Joined",key:"created_at"},{title:"Actions",key:"actions",sortable:!1}];return(u,e)=>{const g=o("v-spacer"),m=o("v-btn"),x=o("v-text-field"),A=o("v-avatar"),F=o("v-chip"),p=o("v-icon"),S=o("v-data-table"),C=o("v-card-text"),V=o("v-card"),z=o("v-card-title"),U=o("v-textarea"),h=o("v-checkbox"),B=o("v-card-actions"),G=o("v-dialog");return M(),L(T,null,[t(i(P),{title:"Customers - Admin"}),t(q,{user:u.$page.props.auth.user},{default:l(()=>[n("div",H,[e[7]||(e[7]=n("div",null,[n("h1",{class:"text-h4 font-weight-bold mb-1"},"Customers"),n("p",{class:"text-body-2 text-grey"},"Manage your platform customers")],-1)),t(g),t(m,{color:"primary","prepend-icon":"mdi-plus",href:"/admin/customers/create"},{default:l(()=>[...e[6]||(e[6]=[s("Add Customer",-1)])]),_:1})]),t(V,null,{default:l(()=>[t(C,null,{default:l(()=>[t(x,{modelValue:f.value,"onUpdate:modelValue":e[0]||(e[0]=a=>f.value=a),"prepend-inner-icon":"mdi-magnify",label:"Search customers...",variant:"outlined",density:"compact","hide-details":"",class:"mb-4",style:{"max-width":"400px"}},null,8,["modelValue"]),t(S,{headers:$,items:y.customers?.data||[],hover:""},{"item.name":l(({item:a})=>[n("div",K,[t(A,{color:"primary",size:"36",class:"mr-3"},{default:l(()=>[s(d(a.name?.charAt(0)||"?"),1)]),_:2},1024),n("div",null,[n("p",O,d(a.name),1),n("p",Q,d(a.email),1)])])]),"item.company":l(({item:a})=>[s(d(a.customer?.company_name||"-"),1)]),"item.balance":l(({item:a})=>[n("span",R,d(D(a.wallet?.balance)),1)]),"item.status":l(({item:a})=>[t(F,{color:a.is_active?"success":"error",size:"small"},{default:l(()=>[s(d(a.is_active?"Active":"Inactive"),1)]),_:2},1032,["color"])]),"item.created_at":l(({item:a})=>[s(d(new Date(a.created_at).toLocaleDateString()),1)]),"item.actions":l(({item:a})=>[t(m,{icon:"",variant:"text",size:"small",href:`/admin/customers/${a.id}`},{default:l(()=>[t(p,null,{default:l(()=>[...e[8]||(e[8]=[s("mdi-eye",-1)])]),_:1})]),_:1},8,["href"]),t(m,{icon:"",variant:"text",size:"small",href:`/admin/customers/${a.id}/edit`},{default:l(()=>[t(p,null,{default:l(()=>[...e[9]||(e[9]=[s("mdi-pencil",-1)])]),_:1})]),_:1},8,["href"]),t(m,{icon:"",variant:"text",size:"small",color:"success",onClick:Y=>k(a)},{default:l(()=>[t(p,null,{default:l(()=>[...e[10]||(e[10]=[s("mdi-wallet-plus",-1)])]),_:1})]),_:1},8,["onClick"])]),_:1},8,["items"])]),_:1})]),_:1}),t(G,{modelValue:c.value,"onUpdate:modelValue":e[5]||(e[5]=a=>c.value=a),"max-width":"500"},{default:l(()=>[t(V,null,{default:l(()=>[t(z,{class:"d-flex align-center"},{default:l(()=>[t(p,{color:"success",class:"mr-2"},{default:l(()=>[...e[11]||(e[11]=[s("mdi-wallet-plus",-1)])]),_:1}),e[12]||(e[12]=s("Credit Wallet",-1))]),_:1}),t(C,null,{default:l(()=>[n("p",X,[e[13]||(e[13]=s("Credit wallet for ",-1)),n("strong",null,d(b.value?.name),1)]),t(x,{modelValue:i(r).amount,"onUpdate:modelValue":e[1]||(e[1]=a=>i(r).amount=a),label:"Amount (NGN)",type:"number","prepend-inner-icon":"mdi-currency-ngn",variant:"outlined",class:"mb-4"},null,8,["modelValue"]),t(U,{modelValue:i(r).description,"onUpdate:modelValue":e[2]||(e[2]=a=>i(r).description=a),label:"Description",variant:"outlined",rows:"2",class:"mb-4"},null,8,["modelValue"]),t(h,{modelValue:i(r).is_bonus,"onUpdate:modelValue":e[3]||(e[3]=a=>i(r).is_bonus=a),label:"Credit as bonus",color:"primary"},null,8,["modelValue"])]),_:1}),t(B,null,{default:l(()=>[t(g),t(m,{variant:"text",onClick:e[4]||(e[4]=a=>c.value=!1)},{default:l(()=>[...e[14]||(e[14]=[s("Cancel",-1)])]),_:1}),t(m,{color:"success",loading:i(r).processing,onClick:N},{default:l(()=>[...e[15]||(e[15]=[s("Credit",-1)])]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["user"])],64)}}});export{ae as default};
