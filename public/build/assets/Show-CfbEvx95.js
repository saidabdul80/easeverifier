import{d as j,j as A,g as E,r as a,c as w,o as b,a as t,u as C,h as I,w as e,b as n,e as s,t as i,F as D,f as U,p as J}from"./app-ChoLXEh6.js";import{_ as W}from"./AdminLayout.vue_vue_type_script_setup_true_lang-Bw4wTaMy.js";import"./index-p5wq9x94.js";const q={class:"d-flex align-center mb-6"},H={class:"text-h4 font-weight-bold mb-1"},K={class:"text-body-2 text-grey"},M={class:"text-h4 font-weight-bold mb-2"},O={class:"text-caption opacity-80"},Q={class:"text-h4 font-weight-bold text-primary mb-0"},R={class:"text-h4 font-weight-bold text-success mb-0"},X={class:"text-h4 font-weight-bold text-error mb-0"},Y={key:1,class:"text-grey"},lt=j({__name:"Show",props:{user:{},customer:{},verificationStats:{},services:{},customPricing:{}},setup(o){const P=o,f=A(!1),m=E({service_id:null,price:0}),N=d=>{m.service_id=d.id,m.price=P.customPricing?.[d.id]?.price||d.default_price,f.value=!0},F=()=>{m.post(`/admin/customers/${P.customer.id}/pricing`,{onSuccess:()=>{f.value=!1}})},y=d=>new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN",minimumFractionDigits:0}).format(d||0);return(d,l)=>{const _=a("v-btn"),k=a("v-spacer"),V=a("v-chip"),S=a("v-card-title"),v=a("v-list-item-title"),p=a("v-list-item-subtitle"),x=a("v-list-item"),$=a("v-list"),r=a("v-card-text"),c=a("v-card"),g=a("v-col"),B=a("v-row"),z=a("v-table"),G=a("v-text-field"),L=a("v-card-actions"),T=a("v-dialog");return b(),w(D,null,[t(C(I),{title:`${o.customer.name} - Admin`},null,8,["title"]),t(W,{user:d.$page.props.auth.user},{default:e(()=>[n("div",q,[n("div",null,[t(_,{variant:"text","prepend-icon":"mdi-arrow-left",href:"/admin/customers",class:"mb-2"},{default:e(()=>[...l[3]||(l[3]=[s("Back",-1)])]),_:1}),n("h1",H,i(o.customer.name),1),n("p",K,i(o.customer.email),1)]),t(k),t(_,{variant:"outlined",class:"mr-2",href:`/admin/customers/${o.customer.id}/edit`,"prepend-icon":"mdi-pencil"},{default:e(()=>[...l[4]||(l[4]=[s("Edit",-1)])]),_:1},8,["href"]),t(V,{color:o.customer.is_active?"success":"error",size:"large"},{default:e(()=>[s(i(o.customer.is_active?"Active":"Inactive"),1)]),_:1},8,["color"])]),t(B,null,{default:e(()=>[t(g,{cols:"12",md:"4"},{default:e(()=>[t(c,{class:"mb-4"},{default:e(()=>[t(S,null,{default:e(()=>[...l[5]||(l[5]=[s("Customer Details",-1)])]),_:1}),t(r,null,{default:e(()=>[t($,{density:"compact"},{default:e(()=>[t(x,null,{default:e(()=>[t(v,{class:"text-caption"},{default:e(()=>[...l[6]||(l[6]=[s("Company",-1)])]),_:1}),t(p,null,{default:e(()=>[s(i(o.customer.customer?.company_name||"-"),1)]),_:1})]),_:1}),t(x,null,{default:e(()=>[t(v,{class:"text-caption"},{default:e(()=>[...l[7]||(l[7]=[s("Business Type",-1)])]),_:1}),t(p,null,{default:e(()=>[s(i(o.customer.customer?.business_type||"-"),1)]),_:1})]),_:1}),t(x,null,{default:e(()=>[t(v,{class:"text-caption"},{default:e(()=>[...l[8]||(l[8]=[s("Phone",-1)])]),_:1}),t(p,null,{default:e(()=>[s(i(o.customer.phone||"-"),1)]),_:1})]),_:1}),t(x,null,{default:e(()=>[t(v,{class:"text-caption"},{default:e(()=>[...l[9]||(l[9]=[s("Location",-1)])]),_:1}),t(p,null,{default:e(()=>[s(i([o.customer.customer?.city,o.customer.customer?.state].filter(Boolean).join(", ")||"-"),1)]),_:1})]),_:1}),t(x,null,{default:e(()=>[t(v,{class:"text-caption"},{default:e(()=>[...l[10]||(l[10]=[s("Joined",-1)])]),_:1}),t(p,null,{default:e(()=>[s(i(new Date(o.customer.created_at).toLocaleDateString()),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(c,{color:"primary"},{default:e(()=>[t(r,{class:"text-white"},{default:e(()=>[l[11]||(l[11]=n("p",{class:"text-overline opacity-80"},"Wallet Balance",-1)),n("p",M,i(y(o.customer.wallet?.balance)),1),n("p",O,"Bonus: "+i(y(o.customer.wallet?.bonus_balance)),1)]),_:1})]),_:1})]),_:1}),t(g,{cols:"12",md:"8"},{default:e(()=>[t(B,{class:"mb-4"},{default:e(()=>[t(g,{cols:"4"},{default:e(()=>[t(c,null,{default:e(()=>[t(r,{class:"text-center"},{default:e(()=>[n("p",Q,i((o.verificationStats?.completed||0)+(o.verificationStats?.failed||0)),1),l[12]||(l[12]=n("p",{class:"text-caption text-grey"},"Total Verifications",-1))]),_:1})]),_:1})]),_:1}),t(g,{cols:"4"},{default:e(()=>[t(c,null,{default:e(()=>[t(r,{class:"text-center"},{default:e(()=>[n("p",R,i(o.verificationStats?.completed||0),1),l[13]||(l[13]=n("p",{class:"text-caption text-grey"},"Successful",-1))]),_:1})]),_:1})]),_:1}),t(g,{cols:"4"},{default:e(()=>[t(c,null,{default:e(()=>[t(r,{class:"text-center"},{default:e(()=>[n("p",X,i(o.verificationStats?.failed||0),1),l[14]||(l[14]=n("p",{class:"text-caption text-grey"},"Failed",-1))]),_:1})]),_:1})]),_:1})]),_:1}),t(c,null,{default:e(()=>[t(S,null,{default:e(()=>[...l[15]||(l[15]=[s("Custom Pricing",-1)])]),_:1}),t(r,null,{default:e(()=>[t(z,{density:"comfortable"},{default:e(()=>[l[17]||(l[17]=n("thead",null,[n("tr",null,[n("th",null,"Service"),n("th",null,"Default Price"),n("th",null,"Custom Price"),n("th")])],-1)),n("tbody",null,[(b(!0),w(D,null,U(o.services,u=>(b(),w("tr",{key:u.id},[n("td",null,i(u.name),1),n("td",null,i(y(u.default_price)),1),n("td",null,[o.customPricing?.[u.id]?(b(),J(V,{key:0,color:"primary",size:"small"},{default:e(()=>[s(i(y(o.customPricing[u.id].price)),1)]),_:2},1024)):(b(),w("span",Y,"Default"))]),n("td",null,[t(_,{size:"small",variant:"text",onClick:Z=>N(u)},{default:e(()=>[...l[16]||(l[16]=[s("Set Price",-1)])]),_:1},8,["onClick"])])]))),128))])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(T,{modelValue:f.value,"onUpdate:modelValue":l[2]||(l[2]=u=>f.value=u),"max-width":"400"},{default:e(()=>[t(c,null,{default:e(()=>[t(S,null,{default:e(()=>[...l[18]||(l[18]=[s("Set Custom Price",-1)])]),_:1}),t(r,null,{default:e(()=>[t(G,{modelValue:C(m).price,"onUpdate:modelValue":l[0]||(l[0]=u=>C(m).price=u),label:"Price (NGN)",type:"number",variant:"outlined"},null,8,["modelValue"])]),_:1}),t(L,null,{default:e(()=>[t(k),t(_,{variant:"text",onClick:l[1]||(l[1]=u=>f.value=!1)},{default:e(()=>[...l[19]||(l[19]=[s("Cancel",-1)])]),_:1}),t(_,{color:"primary",loading:C(m).processing,onClick:F},{default:e(()=>[...l[20]||(l[20]=[s("Save",-1)])]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["user"])],64)}}});export{lt as default};
