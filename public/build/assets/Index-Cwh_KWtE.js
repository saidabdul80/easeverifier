import{d as M,j as g,k as L,m as H,n as P,r as o,c as J,o as h,a as e,u as K,h as O,w as t,b as i,e as s,t as n,p as Q,q as W,F as X}from"./app-CJvuHs2W.js";import{_ as Y}from"./AdminLayout.vue_vue_type_script_setup_true_lang-jfoTV-zj.js";import"./index-p5wq9x94.js";const Z={class:"d-flex align-center mb-6"},tt={class:"text-h4 font-weight-bold text-primary mb-0"},et={class:"text-h4 font-weight-bold text-success mb-0"},lt={class:"text-h4 font-weight-bold text-error mb-0"},at={class:"text-h4 font-weight-bold text-warning mb-0"},st={class:"d-flex align-center ga-4 mb-4"},nt={class:"font-weight-medium text-primary"},ot={class:"bg-grey-lighten-4 pa-1 rounded"},it={class:"font-weight-medium"},rt={class:"d-flex align-center justify-space-between mt-4"},dt={class:"text-caption text-grey"},vt=M({__name:"Index",props:{user:{},verifications:{},stats:{},filters:{}},setup(r){const x=r,y=g(x.filters?.search||""),b=g(x.filters?.status||""),w=g(x.verifications?.current_page||1),V=g(!1),u=g(null),D=L(()=>x.verifications?.last_page||1);H([y,b],([d,l])=>{w.value=1,P.get("/admin/verifications",{search:d||void 0,status:l||void 0,page:1},{preserveState:!0,replace:!0})});const A=d=>{w.value=d,P.get("/admin/verifications",{search:y.value||void 0,status:b.value||void 0,page:d},{preserveState:!0,replace:!0})},F=d=>{u.value=d,V.value=!0},z=d=>new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN",minimumFractionDigits:0}).format(d||0),B=[{title:"Reference",key:"reference"},{title:"Customer",key:"user"},{title:"Service",key:"service"},{title:"Search Parameter",key:"search_parameter"},{title:"Status",key:"status"},{title:"Amount",key:"amount_charged"},{title:"Date",key:"created_at"},{title:"",key:"actions",sortable:!1}];return(d,l)=>{const S=o("v-spacer"),c=o("v-btn"),m=o("v-card-text"),f=o("v-card"),k=o("v-col"),T=o("v-row"),U=o("v-text-field"),$=o("v-btn-toggle"),N=o("v-chip"),C=o("v-icon"),R=o("v-data-table"),j=o("v-pagination"),q=o("v-card-title"),v=o("v-list-item-title"),_=o("v-list-item-subtitle"),p=o("v-list-item"),E=o("v-list"),G=o("v-card-actions"),I=o("v-dialog");return h(),J(X,null,[e(K(O),{title:"Verifications - Admin"}),e(Y,{user:d.$page.props.auth.user},{default:t(()=>[i("div",Z,[l[6]||(l[6]=i("div",null,[i("h1",{class:"text-h4 font-weight-bold mb-1"},"Verifications"),i("p",{class:"text-body-2 text-grey"},"Monitor all verification requests")],-1)),e(S),e(c,{variant:"outlined","prepend-icon":"mdi-download"},{default:t(()=>[...l[5]||(l[5]=[s("Export",-1)])]),_:1})]),e(T,{class:"mb-6"},{default:t(()=>[e(k,{cols:"6",sm:"3"},{default:t(()=>[e(f,null,{default:t(()=>[e(m,{class:"text-center"},{default:t(()=>[i("p",tt,n(r.stats?.total||0),1),l[7]||(l[7]=i("p",{class:"text-caption text-grey"},"Total",-1))]),_:1})]),_:1})]),_:1}),e(k,{cols:"6",sm:"3"},{default:t(()=>[e(f,null,{default:t(()=>[e(m,{class:"text-center"},{default:t(()=>[i("p",et,n(r.stats?.completed||0),1),l[8]||(l[8]=i("p",{class:"text-caption text-grey"},"Completed",-1))]),_:1})]),_:1})]),_:1}),e(k,{cols:"6",sm:"3"},{default:t(()=>[e(f,null,{default:t(()=>[e(m,{class:"text-center"},{default:t(()=>[i("p",lt,n(r.stats?.failed||0),1),l[9]||(l[9]=i("p",{class:"text-caption text-grey"},"Failed",-1))]),_:1})]),_:1})]),_:1}),e(k,{cols:"6",sm:"3"},{default:t(()=>[e(f,null,{default:t(()=>[e(m,{class:"text-center"},{default:t(()=>[i("p",at,n(r.stats?.pending||0),1),l[10]||(l[10]=i("p",{class:"text-caption text-grey"},"Pending",-1))]),_:1})]),_:1})]),_:1})]),_:1}),e(f,null,{default:t(()=>[e(m,null,{default:t(()=>[i("div",st,[e(U,{modelValue:y.value,"onUpdate:modelValue":l[0]||(l[0]=a=>y.value=a),"prepend-inner-icon":"mdi-magnify",label:"Search...",variant:"outlined",density:"compact","hide-details":"",style:{"max-width":"300px"}},null,8,["modelValue"]),e($,{modelValue:b.value,"onUpdate:modelValue":l[1]||(l[1]=a=>b.value=a),variant:"outlined",density:"compact"},{default:t(()=>[e(c,{value:""},{default:t(()=>[...l[11]||(l[11]=[s("All",-1)])]),_:1}),e(c,{value:"completed"},{default:t(()=>[...l[12]||(l[12]=[s("Completed",-1)])]),_:1}),e(c,{value:"failed"},{default:t(()=>[...l[13]||(l[13]=[s("Failed",-1)])]),_:1}),e(c,{value:"pending"},{default:t(()=>[...l[14]||(l[14]=[s("Pending",-1)])]),_:1})]),_:1},8,["modelValue"])]),e(R,{headers:B,items:r.verifications?.data||[],"items-per-page":-1,hover:""},{"item.reference":t(({item:a})=>[i("span",nt,n(a.reference),1)]),"item.user":t(({item:a})=>[s(n(a.user?.name||"N/A"),1)]),"item.service":t(({item:a})=>[e(N,{size:"small",variant:"tonal",color:"primary"},{default:t(()=>[s(n(a.verification_service?.name||"N/A"),1)]),_:2},1024)]),"item.search_parameter":t(({item:a})=>[i("code",ot,n(a.search_parameter),1)]),"item.status":t(({item:a})=>[e(N,{color:a.status==="completed"?"success":a.status==="pending"?"warning":"error",size:"small"},{default:t(()=>[e(C,{start:"",size:"small"},{default:t(()=>[s(n(a.status==="completed"?"mdi-check-circle":a.status==="pending"?"mdi-clock":"mdi-close-circle"),1)]),_:2},1024),s(" "+n(a.status),1)]),_:2},1032,["color"])]),"item.amount_charged":t(({item:a})=>[i("span",it,n(z(a.amount_charged)),1)]),"item.created_at":t(({item:a})=>[s(n(new Date(a.created_at).toLocaleString()),1)]),"item.actions":t(({item:a})=>[e(c,{icon:"",variant:"text",size:"small",onClick:ut=>F(a)},{default:t(()=>[e(C,null,{default:t(()=>[...l[15]||(l[15]=[s("mdi-eye",-1)])]),_:1})]),_:1},8,["onClick"])]),bottom:t(()=>[...l[16]||(l[16]=[])]),_:1},8,["items"]),i("div",rt,[i("span",dt," Showing "+n(((r.verifications?.current_page||1)-1)*(r.verifications?.per_page||20)+1)+" to "+n(Math.min((r.verifications?.current_page||1)*(r.verifications?.per_page||20),r.verifications?.total||0))+" of "+n(r.verifications?.total||0)+" results ",1),e(j,{modelValue:w.value,"onUpdate:modelValue":[l[2]||(l[2]=a=>w.value=a),A],length:D.value,"total-visible":7,density:"comfortable"},null,8,["modelValue","length"])])]),_:1})]),_:1}),e(I,{modelValue:V.value,"onUpdate:modelValue":l[4]||(l[4]=a=>V.value=a),"max-width":"600"},{default:t(()=>[u.value?(h(),Q(f,{key:0},{default:t(()=>[e(q,{class:"d-flex align-center"},{default:t(()=>[e(C,{color:"primary",class:"mr-2"},{default:t(()=>[...l[17]||(l[17]=[s("mdi-shield-check",-1)])]),_:1}),l[18]||(l[18]=s(" Verification Details ",-1))]),_:1}),e(m,null,{default:t(()=>[e(E,{density:"compact"},{default:t(()=>[e(p,null,{default:t(()=>[e(v,{class:"text-caption"},{default:t(()=>[...l[19]||(l[19]=[s("Reference",-1)])]),_:1}),e(_,null,{default:t(()=>[s(n(u.value.reference),1)]),_:1})]),_:1}),e(p,null,{default:t(()=>[e(v,{class:"text-caption"},{default:t(()=>[...l[20]||(l[20]=[s("Customer",-1)])]),_:1}),e(_,null,{default:t(()=>[s(n(u.value.user?.name),1)]),_:1})]),_:1}),e(p,null,{default:t(()=>[e(v,{class:"text-caption"},{default:t(()=>[...l[21]||(l[21]=[s("Service",-1)])]),_:1}),e(_,null,{default:t(()=>[s(n(u.value.verification_service?.name),1)]),_:1})]),_:1}),e(p,null,{default:t(()=>[e(v,{class:"text-caption"},{default:t(()=>[...l[22]||(l[22]=[s("Search Parameter",-1)])]),_:1}),e(_,null,{default:t(()=>[s(n(u.value.search_parameter),1)]),_:1})]),_:1}),e(p,null,{default:t(()=>[e(v,{class:"text-caption"},{default:t(()=>[...l[23]||(l[23]=[s("Provider",-1)])]),_:1}),e(_,null,{default:t(()=>[s(n(u.value.service_provider?.name||"N/A"),1)]),_:1})]),_:1}),e(p,null,{default:t(()=>[e(v,{class:"text-caption"},{default:t(()=>[...l[24]||(l[24]=[s("Response Time",-1)])]),_:1}),e(_,null,{default:t(()=>[s(n(u.value.response_time_ms)+"ms",1)]),_:1})]),_:1})]),_:1})]),_:1}),e(G,null,{default:t(()=>[e(S),e(c,{variant:"text",onClick:l[3]||(l[3]=a=>V.value=!1)},{default:t(()=>[...l[25]||(l[25]=[s("Close",-1)])]),_:1})]),_:1})]),_:1})):W("",!0)]),_:1},8,["modelValue"])]),_:1},8,["user"])],64)}}});export{vt as default};
