import{d as P,m as h,n as z,r as n,c as m,o as v,a as l,u as L,h as U,w as o,b as e,e as y,p as K,k as T,F as w,f as q,t as i,q as C}from"./app-l1FaofIK.js";import{_ as E}from"./AdminLayout.vue_vue_type_script_setup_true_lang-CWfjpKbd.js";import"./index-BW5IY9go.js";const G={class:"d-flex align-center mb-6"},I={class:"py-2"},M={class:"font-weight-medium mb-0"},j={class:"text-caption text-grey"},H={class:"text-right"},J={key:0},X=P({__name:"Index",props:{posts:{},filters:{},categories:{}},setup(r){const p=r,d=h(p.filters.search||""),u=h(p.filters.status||""),c=h(p.filters.category||""),_=()=>{C.get("/admin/blog",{search:d.value||void 0,status:u.value||void 0,category:c.value||void 0},{preserveState:!0})};z([u,c],_);const S=s=>{confirm(`Delete "${s.title}"?`)&&C.delete(`/admin/blog/${s.id}`)},k=s=>({draft:"warning",published:"success",archived:"grey"})[s]||"grey",N=s=>s?new Date(s).toLocaleDateString("en-NG",{year:"numeric",month:"short",day:"numeric"}):"Not published";return(s,a)=>{const D=n("v-spacer"),f=n("v-btn"),$=n("v-text-field"),g=n("v-col"),b=n("v-select"),A=n("v-row"),B=n("v-card-text"),x=n("v-card"),V=n("v-chip"),F=n("v-table");return v(),m(w,null,[l(L(U),{title:"Blog Posts - Admin"}),l(E,{user:s.$page.props.auth.user},{default:o(()=>[e("div",G,[a[5]||(a[5]=e("div",null,[e("h1",{class:"text-h4 font-weight-bold mb-1"},"Blog Posts"),e("p",{class:"text-body-2 text-grey"},"Manage blog content")],-1)),l(D),l(f,{color:"primary","prepend-icon":"mdi-plus",href:"/admin/blog/create"},{default:o(()=>[...a[4]||(a[4]=[y("New Post",-1)])]),_:1})]),l(x,{class:"mb-6"},{default:o(()=>[l(B,null,{default:o(()=>[l(A,null,{default:o(()=>[l(g,{cols:"12",md:"4"},{default:o(()=>[l($,{modelValue:d.value,"onUpdate:modelValue":a[0]||(a[0]=t=>d.value=t),label:"Search posts","prepend-inner-icon":"mdi-magnify",variant:"outlined",density:"compact","hide-details":"",clearable:"",onKeyup:K(_,["enter"]),"onClick:clear":a[1]||(a[1]=t=>{d.value="",_()})},null,8,["modelValue"])]),_:1}),l(g,{cols:"6",md:"3"},{default:o(()=>[l(b,{modelValue:u.value,"onUpdate:modelValue":a[2]||(a[2]=t=>u.value=t),items:[{title:"All Status",value:""},{title:"Draft",value:"draft"},{title:"Published",value:"published"},{title:"Archived",value:"archived"}],label:"Status",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),l(g,{cols:"6",md:"3"},{default:o(()=>[l(b,{modelValue:c.value,"onUpdate:modelValue":a[3]||(a[3]=t=>c.value=t),items:[{title:"All Categories",value:""},...r.categories.map(t=>({title:t,value:t}))],label:"Category",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1})]),_:1}),l(x,null,{default:o(()=>[l(F,null,{default:o(()=>[a[7]||(a[7]=e("thead",null,[e("tr",null,[e("th",null,"Title"),e("th",null,"Category"),e("th",null,"Status"),e("th",null,"Views"),e("th",null,"Date"),e("th",{class:"text-right"},"Actions")])],-1)),e("tbody",null,[(v(!0),m(w,null,q(r.posts.data,t=>(v(),m("tr",{key:t.id},[e("td",null,[e("div",I,[e("p",M,i(t.title),1),e("p",j,"by "+i(t.author?.name),1)])]),e("td",null,[l(V,{size:"small",variant:"outlined"},{default:o(()=>[y(i(t.category),1)]),_:2},1024)]),e("td",null,[l(V,{size:"small",color:k(t.status)},{default:o(()=>[y(i(t.status),1)]),_:2},1032,["color"])]),e("td",null,i(t.views.toLocaleString()),1),e("td",null,i(N(t.published_at)),1),e("td",H,[l(f,{icon:"mdi-pencil",size:"small",variant:"text",href:`/admin/blog/${t.id}/edit`},null,8,["href"]),l(f,{icon:"mdi-delete",size:"small",variant:"text",color:"error",onClick:O=>S(t)},null,8,["onClick"])])]))),128)),r.posts.data?.length?T("",!0):(v(),m("tr",J,[...a[6]||(a[6]=[e("td",{colspan:"6",class:"text-center py-8 text-grey"},"No blog posts found",-1)])]))])]),_:1})]),_:1})]),_:1},8,["user"])],64)}}});export{X as default};
