import{r as be,s as _e,q as ge,c as we,d as xe,f as ke,_ as Ce,a as $e,g as qe,h as Ve}from"./Layout.vue_vue_type_script_setup_true_lang-yod9VM3z.js";import{q as ue,V as Se,d as Ee,s as Me,f as Ie,v as Ae,P as X,w as Be,x as Fe,c as A,a as S,y as de,b as z,r as Y,h as Pe,n as ce,z as Re,_ as Te}from"./AppLayout.vue_vue_type_script_setup_true_lang-Dtx3WhEu.js";import{d as b,j as C,k as Z,n as h,o as r,x as I,c as m,p as pe,F as M,m as O,U as je,i as R,w as d,y as E,a as u,b as e,A as fe,$ as ve,aa as ee,V as ae,v as F,f as w,t as L,e as c,ai as me,ac as De,af as J,aj as ze,ak as Oe,h as Le,q as Ne,s as He}from"./app-CzCLs3up.js";import{_ as Ke}from"./InputError.vue_vue_type_script_setup_true_lang-fx2nL7_P.js";import{d as Ue,a as Qe,b as We,c as Ge,_ as Je}from"./DialogTitle.vue_vue_type_script_setup_true_lang-XQl-NtKr.js";import"./index-Dz1Zefys.js";import"./index-Bbo4RtDD.js";var Xe=b({inheritAttrs:!1,__name:"VisuallyHiddenInputBubble",props:{name:{type:String,required:!0},value:{type:null,required:!0},checked:{type:Boolean,required:!1,default:void 0},required:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},feature:{type:String,required:!1,default:"fully-hidden"}},setup(s){const t=s,{primitiveElement:a,currentElement:l}=ue(),i=C(()=>t.checked??t.value);return Z(i,(p,o)=>{if(!l.value)return;const y=l.value,_=window.HTMLInputElement.prototype,$=Object.getOwnPropertyDescriptor(_,"value").set;if($&&p!==o){const q=new Event("input",{bubbles:!0}),V=new Event("change",{bubbles:!0});$.call(y,p),y.dispatchEvent(q),y.dispatchEvent(V)}}),(p,o)=>(r(),h(Se,I({ref_key:"primitiveElement",ref:a},{...t,...p.$attrs},{as:"input"}),null,16))}}),le=Xe,Ye=b({inheritAttrs:!1,__name:"VisuallyHiddenInput",props:{name:{type:String,required:!0},value:{type:null,required:!0},checked:{type:Boolean,required:!1,default:void 0},required:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},feature:{type:String,required:!1,default:"fully-hidden"}},setup(s){const t=s,a=C(()=>typeof t.value=="object"&&Array.isArray(t.value)&&t.value.length===0&&t.required),l=C(()=>typeof t.value=="string"||typeof t.value=="number"||typeof t.value=="boolean"||t.value===null||t.value===void 0?[{name:t.name,value:t.value}]:typeof t.value=="object"&&Array.isArray(t.value)?t.value.flatMap((i,p)=>typeof i=="object"?Object.entries(i).map(([o,y])=>({name:`${t.name}[${p}][${o}]`,value:y})):{name:`${t.name}[${p}]`,value:i}):t.value!==null&&typeof t.value=="object"&&!Array.isArray(t.value)?Object.entries(t.value).map(([i,p])=>({name:`${t.name}[${i}]`,value:p})):[]);return(i,p)=>(r(),m(M,null,[pe(" We render single input if it's required "),a.value?(r(),h(le,I({key:i.name},{...t,...i.$attrs},{name:i.name,value:i.value}),null,16,["name","value"])):(r(!0),m(M,{key:1},O(l.value,o=>(r(),h(le,I({key:o.name},{ref_for:!0},{...t,...i.$attrs},{name:o.name,value:o.value}),null,16,["name","value"]))),128))],2112))}}),Ze=Ye;const[et,tt]=Ae("PinInputRoot");var at=b({inheritAttrs:!1,__name:"PinInputRoot",props:{modelValue:{type:null,required:!1},defaultValue:{type:Array,required:!1},placeholder:{type:String,required:!1,default:""},mask:{type:Boolean,required:!1},otp:{type:Boolean,required:!1},type:{type:null,required:!1,default:"text"},dir:{type:String,required:!1},disabled:{type:Boolean,required:!1},id:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue","complete"],setup(s,{emit:t}){const a=s,l=t,{mask:i,otp:p,placeholder:o,type:y,disabled:_,dir:k}=je(a),{forwardRef:$}=Ee(),q=Me(k),V=Ie(a,"modelValue",l,{defaultValue:a.defaultValue??[],passive:a.modelValue===void 0}),T=C(()=>Array.isArray(V.value)?[...V.value]:[]),B=R(new Set);function U(f){B.value.add(f)}const N=C(()=>a.type==="number"),j=C(()=>T.value.filter(g=>!!g||N.value&&g===0).length===B.value.size);return Z(V,()=>{j.value&&l("complete",V.value)},{deep:!0}),tt({modelValue:V,currentModelValue:T,mask:i,otp:p,placeholder:o,type:y,dir:q,disabled:_,isCompleted:j,inputElements:B,onInputElementChange:U,isNumericMode:N}),(f,g)=>(r(),h(e(X),I(f.$attrs,{ref:e($),dir:e(q),"data-complete":j.value?"":void 0,"data-disabled":e(_)?"":void 0}),{default:d(()=>[E(f.$slots,"default",{modelValue:e(V)}),u(Ze,{id:f.id,as:"input",feature:"focusable",tabindex:"-1",value:T.value.join(""),name:f.name??"",disabled:e(_),required:f.required,onFocus:g[0]||(g[0]=P=>Array.from(B.value)?.[0]?.focus())},null,8,["id","value","name","disabled","required"])]),_:3},16,["dir","data-complete","data-disabled"]))}}),st=at,rt=b({__name:"PinInputInput",props:{index:{type:Number,required:!0},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"input"}},setup(s){const t=s,a=et(),l=C(()=>Array.from(a.inputElements.value)),i=C(()=>a.currentModelValue.value[t.index]),p=C(()=>t.disabled||a.disabled.value),o=C(()=>a.otp.value),y=C(()=>a.mask.value),{primitiveElement:_,currentElement:k}=ue();function $(n){const v=n.target;if((n.data?.length??0)>1){f(v.value);return}if(a.isNumericMode.value&&!/^\d*$/.test(v.value)){v.value=v.value.replace(/\D/g,"");return}v.value=n.data??"",P(t.index,v.value);const x=l.value[t.index+1];x&&x.focus()}function q(){const n=k.value;ae(()=>{n&&!n.value&&(n.placeholder=a.placeholder.value)})}function V(n){Be(n,Fe(),void 0,{itemsArray:l.value,focus:!0,loop:!1,arrowKeyOptions:"horizontal",dir:a.dir.value})}function T(n){if(n.preventDefault(),n.target.value)P(t.index,"");else{const D=l.value[t.index-1];D&&(D.focus(),P(t.index-1,""))}}function B(n){n.key==="Delete"&&(n.preventDefault(),P(t.index,""))}function U(n){const v=n.target;v.setSelectionRange(1,1),v.value||(v.placeholder="")}function N(n){q()}function j(n){n.preventDefault();const v=n.clipboardData;if(!v)return;const x=v.getData("text");f(x)}function f(n){const v=[...a.currentModelValue.value],x=n.length>=l.value.length?0:t.index,D=Math.min(x+n.length,l.value.length);for(let Q=x;Q<D;Q++){const he=l.value[Q],re=n[Q-x];a.isNumericMode.value&&!/^\d*$/.test(re)||(v[Q]=re,he.focus())}a.modelValue.value=v,l.value[D]?.focus()}function g(n){let v=n.length-1;for(;v>=0&&n[v]==="";)n.pop(),v--;return n}function P(n,v){const x=[...a.currentModelValue.value];if(a.isNumericMode.value){const D=+v;v===""||isNaN(D)?delete x[n]:x[n]=D}else x[n]=v;a.modelValue.value=g(x)}return Z(i,()=>{i.value||q()}),fe(()=>{a.onInputElementChange(k.value)}),ve(()=>{a.inputElements?.value.delete(k.value)}),(n,v)=>(r(),h(e(X),{ref_key:"primitiveElement",ref:_,autocapitalize:"none",as:n.as,"as-child":n.asChild,autocomplete:o.value?"one-time-code":"false",type:y.value?"password":"text",inputmode:e(a).isNumericMode.value?"numeric":"text",pattern:e(a).isNumericMode.value?"[0-9]*":void 0,placeholder:e(a).placeholder.value,value:i.value,disabled:p.value,"data-disabled":p.value?"":void 0,"data-complete":e(a).isCompleted.value?"":void 0,"aria-label":`pin input ${n.index+1} of ${l.value.length}`,onInput:v[0]||(v[0]=x=>$(x)),onKeydown:[ee(V,["left","right","up","down","home","end"]),ee(T,["backspace"]),ee(B,["delete"])],onFocus:U,onBlur:N,onPaste:j},{default:d(()=>[E(n.$slots,"default")]),_:3},8,["as","as-child","autocomplete","type","inputmode","pattern","placeholder","value","disabled","data-disabled","data-complete","aria-label"]))}}),lt=rt;/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=A("CheckIcon",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=A("CircleAlertIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const it=A("CopyIcon",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=A("EyeOffIcon",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=A("EyeIcon",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=A("LoaderCircleIcon",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=A("LockKeyholeIcon",[["circle",{cx:"12",cy:"16",r:"1",key:"1au0dj"}],["rect",{x:"3",y:"10",width:"18",height:"12",rx:"2",key:"6s8ecr"}],["path",{d:"M7 10V7a5 5 0 0 1 10 0v3",key:"1pqi11"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=A("RefreshCwIcon",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=A("ScanLineIcon",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=A("ShieldBanIcon",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m4.243 5.21 14.39 12.472",key:"1c9a7c"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=A("ShieldCheckIcon",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),yt=b({__name:"Alert",props:{class:{},variant:{}},setup(s){const t=s;return(a,l)=>(r(),m("div",{"data-slot":"alert",class:F(e(S)(e(_t)({variant:s.variant}),t.class)),role:"alert"},[E(a.$slots,"default")],2))}}),ht=b({__name:"AlertDescription",props:{class:{}},setup(s){const t=s;return(a,l)=>(r(),m("div",{"data-slot":"alert-description",class:F(e(S)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t.class))},[E(a.$slots,"default")],2))}}),bt=b({__name:"AlertTitle",props:{class:{}},setup(s){const t=s;return(a,l)=>(r(),m("div",{"data-slot":"alert-title",class:F(e(S)("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",t.class))},[E(a.$slots,"default")],2))}}),_t=de("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}}),gt={class:"list-inside list-disc text-sm"},ye=b({__name:"AlertError",props:{errors:{},title:{default:"Something went wrong."}},setup(s){const t=s,a=C(()=>Array.from(new Set(t.errors)));return(l,i)=>(r(),h(e(yt),{variant:"destructive"},{default:d(()=>[u(e(nt),{class:"size-4"}),u(e(bt),null,{default:d(()=>[w(L(s.title),1)]),_:1}),u(e(ht),null,{default:d(()=>[c("ul",gt,[(r(!0),m(M,null,O(a.value,(p,o)=>(r(),m("li",{key:o},L(p),1))),128))])]),_:1})]),_:1}))}}),wt=b({__name:"Card",props:{class:{}},setup(s){const t=s;return(a,l)=>(r(),m("div",{"data-slot":"card",class:F(e(S)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t.class))},[E(a.$slots,"default")],2))}}),xt=b({__name:"CardContent",props:{class:{}},setup(s){const t=s;return(a,l)=>(r(),m("div",{"data-slot":"card-content",class:F(e(S)("px-6",t.class))},[E(a.$slots,"default")],2))}}),kt=b({__name:"CardDescription",props:{class:{}},setup(s){const t=s;return(a,l)=>(r(),m("p",{"data-slot":"card-description",class:F(e(S)("text-muted-foreground text-sm",t.class))},[E(a.$slots,"default")],2))}}),Ct=b({__name:"CardHeader",props:{class:{}},setup(s){const t=s;return(a,l)=>(r(),m("div",{"data-slot":"card-header",class:F(e(S)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t.class))},[E(a.$slots,"default")],2))}}),$t=b({__name:"CardTitle",props:{class:{}},setup(s){const t=s;return(a,l)=>(r(),m("h3",{"data-slot":"card-title",class:F(e(S)("leading-none font-semibold",t.class))},[E(a.$slots,"default")],2))}}),te=async s=>{const t=await fetch(s,{headers:{Accept:"application/json"}});if(!t.ok)throw new Error(`Failed to fetch: ${t.status}`);return t.json()},W=R([]),H=R(null),K=R(null),G=R([]),qt=C(()=>K.value!==null&&H.value!==null),se=()=>{const s=async()=>{try{const{svg:y}=await te(ge.url());K.value=y}catch{W.value.push("Failed to fetch QR code"),K.value=null}},t=async()=>{try{const{secretKey:y}=await te(_e.url());H.value=y}catch{W.value.push("Failed to fetch a setup key"),H.value=null}},a=()=>{H.value=null,K.value=null,l()},l=()=>{W.value=[]};return{qrCodeSvg:K,manualSetupKey:H,recoveryCodesList:G,errors:W,hasSetupData:qt,clearSetupData:a,clearErrors:l,clearTwoFactorAuthData:()=>{a(),l(),G.value=[]},fetchQrCode:s,fetchSetupKey:t,fetchSetupData:async()=>{try{l(),await Promise.all([s(),t()])}catch{K.value=null,H.value=null}},fetchRecoveryCodes:async()=>{try{l(),G.value=await te(be.url())}catch{W.value.push("Failed to fetch recovery codes"),G.value=[]}}}},Vt={class:"flex flex-col gap-3 select-none sm:flex-row sm:items-center sm:justify-between"},St={key:0,class:"mt-6"},Et={key:1,class:"mt-3 space-y-3"},Mt={key:0,class:"space-y-2"},It=b({__name:"TwoFactorRecoveryCodes",setup(s){const{recoveryCodesList:t,fetchRecoveryCodes:a,errors:l}=se(),i=R(!1),p=me("recoveryCodeSectionRef"),o=async()=>{!i.value&&!t.value.length&&await a(),i.value=!i.value,i.value&&(await ae(),p.value?.scrollIntoView({behavior:"smooth"}))};return fe(async()=>{t.value.length||await a()}),(y,_)=>(r(),h(e(wt),{class:"w-full"},{default:d(()=>[u(e(Ct),null,{default:d(()=>[u(e($t),{class:"flex gap-3"},{default:d(()=>[u(e(pt),{class:"size-4"}),_[0]||(_[0]=w("2FA Recovery Codes ",-1))]),_:1}),u(e(kt),null,{default:d(()=>[..._[1]||(_[1]=[w(" Recovery codes let you regain access if you lose your 2FA device. Store them in a secure password manager. ",-1)])]),_:1})]),_:1}),u(e(xt),null,{default:d(()=>[c("div",Vt,[u(e(z),{onClick:o,class:"w-fit"},{default:d(()=>[(r(),h(De(i.value?e(ut):e(dt)),{class:"size-4"})),w(" "+L(i.value?"Hide":"View")+" Recovery Codes ",1)]),_:1}),i.value&&e(t).length?(r(),h(e(J),I({key:0},e(we).form(),{method:"post",options:{preserveScroll:!0},onSuccess:e(a)}),{default:d(({processing:k})=>[u(e(z),{variant:"secondary",type:"submit",disabled:k},{default:d(()=>[u(e(ft)),_[2]||(_[2]=w(" Regenerate Codes ",-1))]),_:1},8,["disabled"])]),_:1},16,["onSuccess"])):pe("",!0)]),c("div",{class:F(["relative overflow-hidden transition-all duration-300",i.value?"h-auto opacity-100":"h-0 opacity-0"])},[e(l)?.length?(r(),m("div",St,[u(ye,{errors:e(l)},null,8,["errors"])])):(r(),m("div",Et,[c("div",{ref_key:"recoveryCodeSectionRef",ref:p,class:"grid gap-1 rounded-lg bg-muted p-4 font-mono text-sm"},[e(t).length?(r(!0),m(M,{key:1},O(e(t),(k,$)=>(r(),m("div",{key:$},L(k),1))),128)):(r(),m("div",Mt,[(r(),m(M,null,O(8,k=>c("div",{key:k,class:"h-4 animate-pulse rounded bg-muted-foreground/20"})),64))]))],512),_[3]||(_[3]=c("p",{class:"text-xs text-muted-foreground select-none"},[w(" Each recovery code can be used once to access your account and will be removed after use. If you need more, click "),c("span",{class:"font-bold"},"Regenerate Codes"),w(" above. ")],-1))]))],2)]),_:1})]),_:1}))}}),ne=b({__name:"Spinner",props:{class:{}},setup(s){const t=s;return(a,l)=>(r(),h(e(ct),{role:"status","aria-label":"Loading",class:F(e(S)("size-4 animate-spin",t.class))},null,8,["class"]))}}),At=b({__name:"PinInput",props:{modelValue:{default:()=>[]},defaultValue:{},placeholder:{},mask:{type:Boolean},otp:{type:Boolean},type:{},dir:{},disabled:{type:Boolean},id:{},asChild:{type:Boolean},as:{},name:{},required:{type:Boolean},class:{}},emits:["update:modelValue","complete"],setup(s,{emit:t}){const a=s,l=t,i=Y(a,"class"),p=Pe(i,l);return(o,y)=>(r(),h(e(st),I({"data-slot":"pin-input"},e(p),{class:e(S)("flex items-center gap-2 has-disabled:opacity-50 disabled:cursor-not-allowed",a.class)}),{default:d(()=>[E(o.$slots,"default")]),_:3},16,["class"]))}}),Bt=b({__name:"PinInputGroup",props:{asChild:{type:Boolean},as:{},class:{}},setup(s){const t=s,a=Y(t,"class"),l=ce(a);return(i,p)=>(r(),h(e(X),I({"data-slot":"pin-input-group"},e(l),{class:e(S)("flex items-center",t.class)}),{default:d(()=>[E(i.$slots,"default")]),_:3},16,["class"]))}}),Ft=b({__name:"PinInputSlot",props:{index:{},disabled:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(s){const t=s,a=Y(t,"class"),l=ce(a);return(i,p)=>(r(),h(e(lt),I({"data-slot":"pin-input-slot"},e(l),{class:e(S)("border-input focus:border-ring focus:ring-ring/50 focus:aria-invalid:ring-destructive/20 dark:bg-input/30 dark:focus:aria-invalid:ring-destructive/40 aria-invalid:border-destructive focus:aria-invalid:border-destructive relative flex h-9 w-9 items-center justify-center border-y border-r text-sm shadow-xs transition-all outline-none text-center first:rounded-l-md first:border-l last:rounded-r-md focus:z-10 focus:ring-[3px]",t.class)}),null,16,["class"]))}}),Pt={class:"mb-3 w-auto rounded-full border border-border bg-card p-0.5 shadow-sm"},Rt={class:"relative overflow-hidden rounded-full border border-border bg-muted p-2.5"},Tt={class:"absolute inset-0 grid grid-cols-5 opacity-50"},jt={class:"absolute inset-0 grid grid-rows-5 opacity-50"},Dt={class:"relative flex w-auto flex-col items-center justify-center space-y-5"},zt={class:"relative mx-auto flex max-w-md items-center overflow-hidden"},Ot={class:"relative mx-auto aspect-square w-64 overflow-hidden rounded-lg border border-border"},Lt={key:0,class:"absolute inset-0 z-10 flex aspect-square h-auto w-full animate-pulse items-center justify-center bg-background"},Nt={key:1,class:"relative z-10 overflow-hidden border p-5"},Ht=["innerHTML"],Kt={class:"flex w-full items-center space-x-5"},Ut={class:"flex w-full items-center justify-center space-x-2"},Qt={class:"flex w-full items-stretch overflow-hidden rounded-xl border border-border"},Wt={key:0,class:"flex h-full w-full items-center justify-center bg-muted p-3"},Gt=["value"],Jt=["value"],Xt={class:"flex w-full flex-col items-center justify-center space-y-3 py-2"},Yt={class:"flex w-full items-center space-x-5"},Zt=b({__name:"TwoFactorSetupModal",props:ze({requiresConfirmation:{type:Boolean},twoFactorEnabled:{type:Boolean}},{isOpen:{type:Boolean},isOpenModifiers:{}}),emits:["update:isOpen"],setup(s){const t=s,a=Oe(s,"isOpen"),{copy:l,copied:i}=Re(),{qrCodeSvg:p,manualSetupKey:o,clearSetupData:y,fetchSetupData:_,errors:k}=se(),$=R(!1),q=R([]),V=C(()=>q.value.join("")),T=me("pinInputContainerRef"),B=C(()=>t.twoFactorEnabled?{title:"Two-Factor Authentication Enabled",description:"Two-factor authentication is now enabled. Scan the QR code or enter the setup key in your authenticator app.",buttonText:"Close"}:$.value?{title:"Verify Authentication Code",description:"Enter the 6-digit code from your authenticator app",buttonText:"Continue"}:{title:"Enable Two-Factor Authentication",description:"To finish enabling two-factor authentication, scan the QR code or enter the setup key in your authenticator app",buttonText:"Continue"}),U=()=>{if(t.requiresConfirmation){$.value=!0,ae(()=>{T.value?.querySelector("input")?.focus()});return}y(),a.value=!1},N=()=>{t.twoFactorEnabled&&y(),$.value=!1,q.value=[]};return Z(()=>a.value,async j=>{if(!j){N();return}p.value||await _()}),(j,f)=>(r(),h(e(Ue),{open:a.value,"onUpdate:open":f[5]||(f[5]=g=>a.value=g)},{default:d(()=>[u(e(Je),{class:"sm:max-w-md"},{default:d(()=>[u(e(Qe),{class:"flex items-center justify-center"},{default:d(()=>[c("div",Pt,[c("div",Rt,[c("div",Tt,[(r(),m(M,null,O(5,g=>c("div",{key:`col-${g}`,class:"border-r border-border last:border-r-0"})),64))]),c("div",jt,[(r(),m(M,null,O(5,g=>c("div",{key:`row-${g}`,class:"border-b border-border last:border-b-0"})),64))]),u(e(vt),{class:"relative z-20 size-6 text-foreground"})])]),u(e(We),null,{default:d(()=>[w(L(B.value.title),1)]),_:1}),u(e(Ge),{class:"text-center"},{default:d(()=>[w(L(B.value.description),1)]),_:1})]),_:1}),c("div",Dt,[$.value?(r(),h(e(J),I({key:1},e(xe).form(),{"reset-on-error":"",onFinish:f[3]||(f[3]=g=>q.value=[]),onSuccess:f[4]||(f[4]=g=>a.value=!1)}),{default:d(({errors:g,processing:P})=>[c("input",{type:"hidden",name:"code",value:V.value},null,8,Jt),c("div",{ref_key:"pinInputContainerRef",ref:T,class:"relative w-full space-y-3"},[c("div",Xt,[u(e(At),{id:"otp",placeholder:"â—‹",modelValue:q.value,"onUpdate:modelValue":f[1]||(f[1]=n=>q.value=n),type:"number",otp:""},{default:d(()=>[u(e(Bt),null,{default:d(()=>[(r(),m(M,null,O(6,(n,v)=>u(e(Ft),{autofocus:"",key:n,index:v,disabled:P},null,8,["index","disabled"])),64))]),_:2},1024)]),_:2},1032,["modelValue"]),u(Ke,{message:g?.confirmTwoFactorAuthentication?.code},null,8,["message"])]),c("div",Yt,[u(e(z),{type:"button",variant:"outline",class:"w-auto flex-1",onClick:f[2]||(f[2]=n=>$.value=!1),disabled:P},{default:d(()=>[...f[7]||(f[7]=[w(" Back ",-1)])]),_:1},8,["disabled"]),u(e(z),{type:"submit",class:"w-auto flex-1",disabled:P||V.value.length<6},{default:d(()=>[...f[8]||(f[8]=[w(" Confirm ",-1)])]),_:1},8,["disabled"])])],512)]),_:1},16)):(r(),m(M,{key:0},[e(k)?.length?(r(),h(ye,{key:0,errors:e(k)},null,8,["errors"])):(r(),m(M,{key:1},[c("div",zt,[c("div",Ot,[e(p)?(r(),m("div",Nt,[c("div",{innerHTML:e(p),class:"flex aspect-square size-full items-center justify-center"},null,8,Ht)])):(r(),m("div",Lt,[u(e(ne),{class:"size-6"})]))])]),c("div",Kt,[u(e(z),{class:"w-full",onClick:U},{default:d(()=>[w(L(B.value.buttonText),1)]),_:1})]),f[6]||(f[6]=c("div",{class:"relative flex w-full items-center justify-center"},[c("div",{class:"absolute inset-0 top-1/2 h-px w-full bg-border"}),c("span",{class:"relative bg-card px-2 py-1"},"or, enter the code manually")],-1)),c("div",Ut,[c("div",Qt,[e(o)?(r(),m(M,{key:1},[c("input",{type:"text",readonly:"",value:e(o),class:"h-full w-full bg-background p-3 text-foreground"},null,8,Gt),c("button",{onClick:f[0]||(f[0]=g=>e(l)(e(o)||"")),class:"relative block h-auto border-l border-border px-3 hover:bg-muted"},[e(i)?(r(),h(e(ot),{key:0,class:"w-4 text-green-500"})):(r(),h(e(it),{key:1,class:"w-4"}))])],64)):(r(),m("div",Wt,[u(e(ne))]))])])],64))],64))])]),_:1})]),_:1},8,["open"]))}}),ie=b({__name:"Badge",props:{asChild:{type:Boolean},as:{},variant:{},class:{}},setup(s){const t=s,a=Y(t,"class");return(l,i)=>(r(),h(e(X),I({"data-slot":"badge",class:e(S)(e(ea)({variant:s.variant}),t.class)},e(a)),{default:d(()=>[E(l.$slots,"default")]),_:3},16,["class"]))}}),ea=de("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}}),ta={class:"space-y-6"},aa={key:0,class:"flex flex-col items-start justify-start space-y-4"},sa={key:1,class:"flex flex-col items-start justify-start space-y-4"},ra={class:"relative inline"},pa=b({__name:"TwoFactor",props:{requiresConfirmation:{type:Boolean,default:!1},twoFactorEnabled:{type:Boolean,default:!1}},setup(s){const t=[{title:"Two-Factor Authentication",href:ke.url()}],{hasSetupData:a,clearTwoFactorAuthData:l}=se(),i=R(!1);return ve(()=>{l()}),(p,o)=>(r(),h(Te,{breadcrumbs:t},{default:d(()=>[u(e(Le),{title:"Two-Factor Authentication"}),u(Ce,null,{default:d(()=>[c("div",ta,[u($e,{title:"Two-Factor Authentication",description:"Manage your two-factor authentication settings"}),s.twoFactorEnabled?(r(),m("div",sa,[u(e(ie),{variant:"default"},{default:d(()=>[...o[7]||(o[7]=[w("Enabled",-1)])]),_:1}),o[9]||(o[9]=c("p",{class:"text-muted-foreground"}," With two-factor authentication enabled, you will be prompted for a secure, random pin during login, which you can retrieve from the TOTP-supported application on your phone. ",-1)),u(It),c("div",ra,[u(e(J),Ne(He(e(Ve).form())),{default:d(({processing:y})=>[u(e(z),{variant:"destructive",type:"submit",disabled:y},{default:d(()=>[u(e(mt)),o[8]||(o[8]=w(" Disable 2FA ",-1))]),_:1},8,["disabled"])]),_:1},16)])])):(r(),m("div",aa,[u(e(ie),{variant:"destructive"},{default:d(()=>[...o[3]||(o[3]=[w("Disabled",-1)])]),_:1}),o[6]||(o[6]=c("p",{class:"text-muted-foreground"}," When you enable two-factor authentication, you will be prompted for a secure pin during login. This pin can be retrieved from a TOTP-supported application on your phone. ",-1)),c("div",null,[e(a)?(r(),h(e(z),{key:0,onClick:o[0]||(o[0]=y=>i.value=!0)},{default:d(()=>[u(e(oe)),o[4]||(o[4]=w("Continue Setup ",-1))]),_:1})):(r(),h(e(J),I({key:1},e(qe).form(),{onSuccess:o[1]||(o[1]=y=>i.value=!0)}),{default:d(({processing:y})=>[u(e(z),{type:"submit",disabled:y},{default:d(()=>[u(e(oe)),o[5]||(o[5]=w("Enable 2FA",-1))]),_:1},8,["disabled"])]),_:1},16))])])),u(Zt,{isOpen:i.value,"onUpdate:isOpen":o[2]||(o[2]=y=>i.value=y),requiresConfirmation:s.requiresConfirmation,twoFactorEnabled:s.twoFactorEnabled},null,8,["isOpen","requiresConfirmation","twoFactorEnabled"])])]),_:1})]),_:1}))}});export{pa as default};
