import{d as J,z as O,p as Q,i as $,u as B,r,c as P,o as w,a as t,b as s,h as X,w as l,e as o,f as a,m as L,t as p,F as N,l as Z,k as S}from"./app-BE4T21qC.js";import{_ as h}from"./CustomerLayout.vue_vue_type_script_setup_true_lang-Dvi7Tlgk.js";import"./index-Dz1Zefys.js";const ee={class:"d-flex align-center mb-6"},te={class:"font-weight-medium"},le={class:"bg-grey-lighten-4 pa-1 rounded"},ne={class:"text-grey"},oe={class:"text-grey"},ae={class:"text-right"},ue=J({__name:"Index",props:{apiKeys:{},customer:{}},setup(x){const E=x,F=O(),C=Q(()=>F.props.flash),f=$(!1),c=$(!1),d=$(null),m=B({name:"Default",environment:"live"}),g=B({webhook_url:E.customer?.webhook_url||""}),R=()=>{m.post("/customer/api/keys",{preserveScroll:!0,onSuccess:()=>{f.value=!1,m.reset(),C.value?.newKey&&(d.value=C.value.newKey,c.value=!0)}})},W=i=>{confirm("This will invalidate the current secret. Continue?")&&S.post(`/customer/api/keys/${i}/regenerate`,{},{preserveScroll:!0,onSuccess:()=>{C.value?.newKey&&(d.value=C.value.newKey,c.value=!0)}})},Y=i=>{S.post(`/customer/api/keys/${i}/toggle`,{},{preserveScroll:!0})},M=i=>{confirm("Are you sure you want to delete this API key? This cannot be undone.")&&S.delete(`/customer/api/keys/${i}`,{preserveScroll:!0})},j=()=>g.post("/customer/api/webhook"),V=async i=>{await navigator.clipboard.writeText(i)};return(i,e)=>{const I=r("v-spacer"),u=r("v-btn"),v=r("v-icon"),K=r("v-chip"),y=r("v-card-title"),z=r("v-alert"),_=r("v-card-text"),q=r("v-table"),b=r("v-card"),k=r("v-text-field"),U=r("v-col"),G=r("v-row"),H=r("v-select"),D=r("v-card-actions"),T=r("v-dialog");return w(),P(N,null,[t(s(X),{title:"API Keys - EaseVerifier"}),t(h,{user:i.$page.props.auth.user,wallet:i.$page.props.auth.wallet},{default:l(()=>[o("div",ee,[e[12]||(e[12]=o("div",null,[o("h1",{class:"text-h4 font-weight-bold mb-1"},"API Integration"),o("p",{class:"text-body-2 text-grey"},"Manage your API keys for programmatic access")],-1)),t(I),t(u,{color:"primary","prepend-icon":"mdi-plus",onClick:e[0]||(e[0]=n=>f.value=!0)},{default:l(()=>[...e[11]||(e[11]=[a(" Create API Key ",-1)])]),_:1})]),t(b,{class:"mb-6"},{default:l(()=>[t(y,{class:"d-flex align-center"},{default:l(()=>[t(v,{color:"primary",class:"mr-2"},{default:l(()=>[...e[13]||(e[13]=[a("mdi-key-variant",-1)])]),_:1}),e[14]||(e[14]=a(" Your API Keys ",-1)),t(K,{size:"small",class:"ml-2"},{default:l(()=>[a(p(x.apiKeys.length)+"/5",1)]),_:1})]),_:1}),x.apiKeys.length?(w(),L(q,{key:1,density:"comfortable"},{default:l(()=>[e[19]||(e[19]=o("thead",null,[o("tr",null,[o("th",null,"Name"),o("th",null,"Key"),o("th",null,"Environment"),o("th",null,"Status"),o("th",null,"Last Used"),o("th",null,"Created"),o("th",{class:"text-right"},"Actions")])],-1)),o("tbody",null,[(w(!0),P(N,null,Z(x.apiKeys,n=>(w(),P("tr",{key:n.id},[o("td",te,p(n.name),1),o("td",null,[o("code",le,p(n.key.substring(0,20))+"...",1),t(u,{icon:"",size:"x-small",variant:"text",onClick:A=>V(n.key)},{default:l(()=>[t(v,{size:"16"},{default:l(()=>[...e[16]||(e[16]=[a("mdi-content-copy",-1)])]),_:1})]),_:1},8,["onClick"])]),o("td",null,[t(K,{color:n.environment==="live"?"success":"warning",size:"small"},{default:l(()=>[a(p(n.environment),1)]),_:2},1032,["color"])]),o("td",null,[t(K,{color:n.is_active?"success":"grey",size:"small"},{default:l(()=>[a(p(n.is_active?"Active":"Inactive"),1)]),_:2},1032,["color"])]),o("td",ne,p(n.last_used_at||"Never"),1),o("td",oe,p(n.created_at),1),o("td",ae,[t(u,{icon:"",size:"small",variant:"text",onClick:A=>Y(n.id),title:n.is_active?"Deactivate":"Activate"},{default:l(()=>[t(v,null,{default:l(()=>[a(p(n.is_active?"mdi-pause":"mdi-play"),1)]),_:2},1024)]),_:2},1032,["onClick","title"]),t(u,{icon:"",size:"small",variant:"text",color:"warning",onClick:A=>W(n.id),title:"Regenerate Secret"},{default:l(()=>[t(v,null,{default:l(()=>[...e[17]||(e[17]=[a("mdi-refresh",-1)])]),_:1})]),_:1},8,["onClick"]),t(u,{icon:"",size:"small",variant:"text",color:"error",onClick:A=>M(n.id),title:"Delete"},{default:l(()=>[t(v,null,{default:l(()=>[...e[18]||(e[18]=[a("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick"])])]))),128))])]),_:1})):(w(),L(_,{key:0},{default:l(()=>[t(z,{type:"info",variant:"tonal"},{default:l(()=>[...e[15]||(e[15]=[a(" You haven't created any API keys yet. Create one to start using the API. ",-1)])]),_:1})]),_:1}))]),_:1}),t(G,null,{default:l(()=>[t(U,{cols:"12",md:"6"},{default:l(()=>[t(b,null,{default:l(()=>[t(y,{class:"d-flex align-center"},{default:l(()=>[t(v,{color:"primary",class:"mr-2"},{default:l(()=>[...e[20]||(e[20]=[a("mdi-webhook",-1)])]),_:1}),e[21]||(e[21]=a(" Webhook URL ",-1))]),_:1}),t(_,null,{default:l(()=>[e[23]||(e[23]=o("p",{class:"text-body-2 text-grey mb-4"},"Receive real-time notifications for verification results.",-1)),t(k,{modelValue:s(g).webhook_url,"onUpdate:modelValue":e[1]||(e[1]=n=>s(g).webhook_url=n),label:"Webhook URL",variant:"outlined",placeholder:"https://your-domain.com/webhook","error-messages":s(g).errors.webhook_url},null,8,["modelValue","error-messages"]),t(u,{color:"primary",loading:s(g).processing,onClick:j,class:"mt-2"},{default:l(()=>[...e[22]||(e[22]=[a("Save",-1)])]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1}),t(U,{cols:"12",md:"6"},{default:l(()=>[t(b,null,{default:l(()=>[t(y,{class:"d-flex align-center"},{default:l(()=>[t(v,{color:"primary",class:"mr-2"},{default:l(()=>[...e[24]||(e[24]=[a("mdi-book-open-variant",-1)])]),_:1}),e[25]||(e[25]=a(" API Documentation ",-1))]),_:1}),t(_,null,{default:l(()=>[e[27]||(e[27]=o("p",{class:"text-body-2 text-grey mb-4"},"Learn how to integrate EaseVerifier API into your application.",-1)),t(u,{variant:"outlined",href:"/documentation",target:"_blank"},{default:l(()=>[...e[26]||(e[26]=[a("View Documentation",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(T,{modelValue:f.value,"onUpdate:modelValue":e[5]||(e[5]=n=>f.value=n),"max-width":"500"},{default:l(()=>[t(b,null,{default:l(()=>[t(y,null,{default:l(()=>[...e[28]||(e[28]=[a("Create API Key",-1)])]),_:1}),t(_,null,{default:l(()=>[t(k,{modelValue:s(m).name,"onUpdate:modelValue":e[2]||(e[2]=n=>s(m).name=n),label:"Key Name",variant:"outlined",placeholder:"e.g., Production Server",class:"mb-4","error-messages":s(m).errors.name},null,8,["modelValue","error-messages"]),t(H,{modelValue:s(m).environment,"onUpdate:modelValue":e[3]||(e[3]=n=>s(m).environment=n),items:[{title:"Live",value:"live"},{title:"Test",value:"test"}],label:"Environment",variant:"outlined","error-messages":s(m).errors.environment},null,8,["modelValue","error-messages"])]),_:1}),t(D,null,{default:l(()=>[t(I),t(u,{variant:"text",onClick:e[4]||(e[4]=n=>f.value=!1)},{default:l(()=>[...e[29]||(e[29]=[a("Cancel",-1)])]),_:1}),t(u,{color:"primary",loading:s(m).processing,onClick:R},{default:l(()=>[...e[30]||(e[30]=[a("Create",-1)])]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(T,{modelValue:c.value,"onUpdate:modelValue":e[10]||(e[10]=n=>c.value=n),"max-width":"600",persistent:""},{default:l(()=>[t(b,null,{default:l(()=>[t(y,{class:"d-flex align-center"},{default:l(()=>[t(v,{color:"warning",class:"mr-2"},{default:l(()=>[...e[31]||(e[31]=[a("mdi-alert",-1)])]),_:1}),e[32]||(e[32]=a(" Save Your Credentials ",-1))]),_:1}),t(_,null,{default:l(()=>[t(z,{type:"warning",variant:"tonal",class:"mb-4"},{default:l(()=>[...e[33]||(e[33]=[a(" Copy these credentials now. The secret will not be shown again! ",-1)])]),_:1}),t(k,{"model-value":d.value?.key,label:"API Key",variant:"outlined",readonly:"","append-inner-icon":"mdi-content-copy","onClick:appendInner":e[6]||(e[6]=n=>V(d.value?.key||"")),class:"mb-4"},null,8,["model-value"]),t(k,{"model-value":d.value?.secret,label:"API Secret",variant:"outlined",readonly:"","append-inner-icon":"mdi-content-copy","onClick:appendInner":e[7]||(e[7]=n=>V(d.value?.secret||"")),class:"mb-4"},null,8,["model-value"]),t(k,{"model-value":d.value?.bearer_token,label:"Bearer Token (Base64)",variant:"outlined",readonly:"","append-inner-icon":"mdi-content-copy","onClick:appendInner":e[8]||(e[8]=n=>V(d.value?.bearer_token||"")),hint:"Use this token in Authorization header: Bearer {token}","persistent-hint":""},null,8,["model-value"])]),_:1}),t(D,null,{default:l(()=>[t(I),t(u,{color:"primary",onClick:e[9]||(e[9]=n=>{c.value=!1,d.value=null})},{default:l(()=>[...e[34]||(e[34]=[a("I've saved my credentials",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["user","wallet"])],64)}}});export{ue as default};
