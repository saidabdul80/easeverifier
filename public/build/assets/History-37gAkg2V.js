import{d as G,i as u,j,k as I,r as s,c as L,o as z,a as e,b as q,h as J,w as t,e as m,f as o,t as i,m as K,n as M,F as O}from"./app-XFWFhWP_.js";import{_ as Q}from"./CustomerLayout.vue_vue_type_script_setup_true_lang-5ctTly2Y.js";import"./index-Dz1Zefys.js";const W={class:"d-flex align-center mb-6"},X={class:"bg-grey-lighten-4 pa-1 rounded"},Y={class:"font-weight-medium"},ae=G({__name:"History",props:{user:{},verifications:{},services:{},filters:{}},setup(x){const f=x,b=u(f.filters?.service||""),w=u(f.filters?.status||""),k=u(f.filters?.date_from||""),S=u(f.filters?.date_to||""),p=u(!1),n=u(null);j([b,w,k,S],([r,l,y,d])=>{I.get("/customer/history",{service:r||void 0,status:l||void 0,date_from:y||void 0,date_to:d||void 0},{preserveState:!0,replace:!0})});const A=r=>{n.value=r,p.value=!0},C=r=>new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN",minimumFractionDigits:0}).format(r||0),U=[{title:"Service",key:"service"},{title:"Search Parameter",key:"search_parameter"},{title:"Status",key:"status"},{title:"Amount",key:"amount_charged"},{title:"Date",key:"created_at"},{title:"",key:"actions",sortable:!1}];return(r,l)=>{const y=s("v-spacer"),d=s("v-btn"),D=s("v-select"),g=s("v-col"),N=s("v-text-field"),B=s("v-row"),F=s("v-chip"),V=s("v-icon"),T=s("v-data-table"),$=s("v-card-text"),h=s("v-card"),E=s("v-card-title"),c=s("v-list-item-title"),v=s("v-list-item-subtitle"),_=s("v-list-item"),H=s("v-list"),P=s("v-card-actions"),R=s("v-dialog");return z(),L(O,null,[e(q(J),{title:"Verification History - EaseVerifier"}),e(Q,{user:r.$page.props.auth.user,wallet:r.$page.props.auth.wallet},{default:t(()=>[m("div",W,[l[7]||(l[7]=m("div",null,[m("h1",{class:"text-h4 font-weight-bold mb-1"},"Verification History"),m("p",{class:"text-body-2 text-grey"},"View all your past verifications")],-1)),e(y),e(d,{variant:"outlined","prepend-icon":"mdi-download"},{default:t(()=>[...l[6]||(l[6]=[o("Export",-1)])]),_:1})]),e(h,null,{default:t(()=>[e($,null,{default:t(()=>[e(B,{class:"mb-4"},{default:t(()=>[e(g,{cols:"12",sm:"6",md:"3"},{default:t(()=>[e(D,{modelValue:b.value,"onUpdate:modelValue":l[0]||(l[0]=a=>b.value=a),items:[{title:"All Services",value:""},...(x.services||[]).map(a=>({title:a.name,value:a.id}))],label:"Service",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","items"])]),_:1}),e(g,{cols:"12",sm:"6",md:"3"},{default:t(()=>[e(D,{modelValue:w.value,"onUpdate:modelValue":l[1]||(l[1]=a=>w.value=a),items:[{title:"All Status",value:""},{title:"Completed",value:"completed"},{title:"Failed",value:"failed"},{title:"Pending",value:"pending"}],label:"Status",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),e(g,{cols:"12",sm:"6",md:"3"},{default:t(()=>[e(N,{modelValue:k.value,"onUpdate:modelValue":l[2]||(l[2]=a=>k.value=a),label:"From Date",type:"date",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),e(g,{cols:"12",sm:"6",md:"3"},{default:t(()=>[e(N,{modelValue:S.value,"onUpdate:modelValue":l[3]||(l[3]=a=>S.value=a),label:"To Date",type:"date",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),e(T,{headers:U,items:x.verifications?.data||[],hover:""},{"item.service":t(({item:a})=>[e(F,{size:"small",variant:"tonal",color:"primary"},{default:t(()=>[o(i(a.verification_service?.name||"N/A"),1)]),_:2},1024)]),"item.search_parameter":t(({item:a})=>[m("code",X,i(a.search_parameter),1)]),"item.status":t(({item:a})=>[e(F,{color:a.status==="completed"?"success":a.status==="pending"?"warning":"error",size:"small"},{default:t(()=>[e(V,{start:"",size:"small"},{default:t(()=>[o(i(a.status==="completed"?"mdi-check-circle":a.status==="pending"?"mdi-clock":"mdi-close-circle"),1)]),_:2},1024),o(" "+i(a.status),1)]),_:2},1032,["color"])]),"item.amount_charged":t(({item:a})=>[m("span",Y,i(C(a.amount_charged)),1)]),"item.created_at":t(({item:a})=>[o(i(new Date(a.created_at).toLocaleString()),1)]),"item.actions":t(({item:a})=>[e(d,{icon:"",variant:"text",size:"small",onClick:Z=>A(a)},{default:t(()=>[e(V,null,{default:t(()=>[...l[8]||(l[8]=[o("mdi-eye",-1)])]),_:1})]),_:1},8,["onClick"]),e(d,{icon:"",variant:"text",size:"small",href:`/customer/verification/${a.id}`},{default:t(()=>[e(V,null,{default:t(()=>[...l[9]||(l[9]=[o("mdi-open-in-new",-1)])]),_:1})]),_:1},8,["href"])]),_:1},8,["items"])]),_:1})]),_:1}),e(R,{modelValue:p.value,"onUpdate:modelValue":l[5]||(l[5]=a=>p.value=a),"max-width":"600"},{default:t(()=>[n.value?(z(),K(h,{key:0},{default:t(()=>[e(E,{class:"d-flex align-center"},{default:t(()=>[e(V,{color:"primary",class:"mr-2"},{default:t(()=>[...l[10]||(l[10]=[o("mdi-shield-check",-1)])]),_:1}),l[11]||(l[11]=o(" Verification Details ",-1))]),_:1}),e($,null,{default:t(()=>[e(H,{density:"compact"},{default:t(()=>[e(_,null,{default:t(()=>[e(c,{class:"text-caption"},{default:t(()=>[...l[12]||(l[12]=[o("Reference",-1)])]),_:1}),e(v,null,{default:t(()=>[o(i(n.value.reference),1)]),_:1})]),_:1}),e(_,null,{default:t(()=>[e(c,{class:"text-caption"},{default:t(()=>[...l[13]||(l[13]=[o("Service",-1)])]),_:1}),e(v,null,{default:t(()=>[o(i(n.value.verification_service?.name),1)]),_:1})]),_:1}),e(_,null,{default:t(()=>[e(c,{class:"text-caption"},{default:t(()=>[...l[14]||(l[14]=[o("Search Parameter",-1)])]),_:1}),e(v,null,{default:t(()=>[o(i(n.value.search_parameter),1)]),_:1})]),_:1}),e(_,null,{default:t(()=>[e(c,{class:"text-caption"},{default:t(()=>[...l[15]||(l[15]=[o("Amount Charged",-1)])]),_:1}),e(v,null,{default:t(()=>[o(i(C(n.value.amount_charged)),1)]),_:1})]),_:1}),e(_,null,{default:t(()=>[e(c,{class:"text-caption"},{default:t(()=>[...l[16]||(l[16]=[o("Response Time",-1)])]),_:1}),e(v,null,{default:t(()=>[o(i(n.value.response_time_ms)+"ms",1)]),_:1})]),_:1})]),_:1})]),_:1}),e(P,null,{default:t(()=>[e(y),e(d,{variant:"text",onClick:l[4]||(l[4]=a=>p.value=!1)},{default:t(()=>[...l[17]||(l[17]=[o("Close",-1)])]),_:1}),e(d,{color:"primary",href:`/customer/verification/${n.value.id}`},{default:t(()=>[...l[18]||(l[18]=[o("View Full Result",-1)])]),_:1},8,["href"])]),_:1})]),_:1})):M("",!0)]),_:1},8,["modelValue"])]),_:1},8,["user","wallet"])],64)}}});export{ae as default};
