import{d as j,C as G,s as B,m as x,n as I,q as N,r as i,c as R,o as w,a as e,u as U,h as q,w as t,j as T,k as D,b as s,e as n,t as o,y as H,F as L}from"./app-l1FaofIK.js";import{_ as J}from"./CustomerLayout.vue_vue_type_script_setup_true_lang-BP7nN2jy.js";import"./index-BW5IY9go.js";const K={class:"d-flex align-center mb-6"},O={class:"text-h3 font-weight-bold mb-0"},Q={class:"text-h3 font-weight-bold mb-0"},X={class:"text-h3 font-weight-bold text-primary mb-0"},Y={class:"text-h6 font-weight-bold text-success mb-0"},Z={class:"text-h6 font-weight-bold text-error mb-0"},tt={class:"d-flex ga-4 mb-4"},et={class:"font-weight-medium"},at={class:"d-flex align-center justify-space-between mt-4"},lt={class:"text-caption text-grey"},rt=j({__name:"Index",props:{user:{},wallet:{},transactions:{},stats:{},filters:{}},setup(r){const v=r,F=G(),_=B(()=>F.props.flash),g=x(v.filters?.type||""),h=x(v.filters?.category||""),y=x(v.transactions?.current_page||1),S=B(()=>v.transactions?.last_page||1);I([g,h],([c,a])=>{y.value=1,N.get("/customer/wallet",{type:c||void 0,category:a||void 0,page:1},{preserveState:!0,replace:!0})});const P=c=>{y.value=c,N.get("/customer/wallet",{type:g.value||void 0,category:h.value||void 0,page:c},{preserveState:!0,replace:!0})},d=c=>new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN",minimumFractionDigits:0}).format(c||0),$=[{title:"Reference",key:"reference"},{title:"Type",key:"type"},{title:"Category",key:"category"},{title:"Amount",key:"amount"},{title:"Balance After",key:"balance_after"},{title:"Date",key:"created_at"},{title:"Actions",key:"actions",sortable:!1}];return(c,a)=>{const k=i("v-alert"),V=i("v-spacer"),u=i("v-btn"),m=i("v-card-text"),p=i("v-card"),f=i("v-col"),z=i("v-row"),b=i("v-icon"),A=i("v-card-title"),M=i("v-btn-toggle"),C=i("v-chip"),E=i("v-data-table"),W=i("v-pagination");return w(),R(L,null,[e(U(q),{title:"Wallet - EaseVerifier"}),e(J,{user:c.$page.props.auth.user,wallet:c.$page.props.auth.wallet},{default:t(()=>[_.value?.success?(w(),T(k,{key:0,type:"success",variant:"tonal",closable:"",class:"mb-4"},{default:t(()=>[n(o(_.value.success),1)]),_:1})):D("",!0),_.value?.error?(w(),T(k,{key:1,type:"error",variant:"tonal",closable:"",class:"mb-4"},{default:t(()=>[n(o(_.value.error),1)]),_:1})):D("",!0),s("div",K,[a[3]||(a[3]=s("div",null,[s("h1",{class:"text-h4 font-weight-bold mb-1"},"My Wallet"),s("p",{class:"text-body-2 text-grey"},"Manage your wallet and view transactions")],-1)),e(V),e(u,{color:"primary",size:"large",href:"/customer/wallet/fund","prepend-icon":"mdi-wallet-plus"},{default:t(()=>[...a[2]||(a[2]=[n(" Fund Wallet ",-1)])]),_:1})]),e(z,{class:"mb-6"},{default:t(()=>[e(f,{cols:"12",md:"4"},{default:t(()=>[e(p,{color:"primary"},{default:t(()=>[e(m,{class:"text-white"},{default:t(()=>[a[4]||(a[4]=s("p",{class:"text-overline opacity-80"},"Main Balance",-1)),s("p",O,o(d(r.stats?.balance)),1)]),_:1})]),_:1})]),_:1}),e(f,{cols:"12",md:"4"},{default:t(()=>[e(p,{color:"secondary"},{default:t(()=>[e(m,null,{default:t(()=>[a[5]||(a[5]=s("p",{class:"text-overline opacity-80"},"Bonus Balance",-1)),s("p",Q,o(d(r.stats?.bonus_balance)),1)]),_:1})]),_:1})]),_:1}),e(f,{cols:"12",md:"4"},{default:t(()=>[e(p,null,{default:t(()=>[e(m,null,{default:t(()=>[a[6]||(a[6]=s("p",{class:"text-overline text-grey"},"Total Balance",-1)),s("p",X,o(d(r.stats?.total_balance)),1)]),_:1})]),_:1})]),_:1})]),_:1}),e(z,{class:"mb-6"},{default:t(()=>[e(f,{cols:"6"},{default:t(()=>[e(p,null,{default:t(()=>[e(m,{class:"d-flex align-center"},{default:t(()=>[e(b,{color:"success",size:"32",class:"mr-3"},{default:t(()=>[...a[7]||(a[7]=[n("mdi-arrow-down-circle",-1)])]),_:1}),s("div",null,[a[8]||(a[8]=s("p",{class:"text-caption text-grey mb-0"},"Total Funded",-1)),s("p",Y,o(d(r.stats?.total_funded)),1)])]),_:1})]),_:1})]),_:1}),e(f,{cols:"6"},{default:t(()=>[e(p,null,{default:t(()=>[e(m,{class:"d-flex align-center"},{default:t(()=>[e(b,{color:"error",size:"32",class:"mr-3"},{default:t(()=>[...a[9]||(a[9]=[n("mdi-arrow-up-circle",-1)])]),_:1}),s("div",null,[a[10]||(a[10]=s("p",{class:"text-caption text-grey mb-0"},"Total Spent",-1)),s("p",Z,o(d(r.stats?.total_spent)),1)])]),_:1})]),_:1})]),_:1})]),_:1}),e(p,null,{default:t(()=>[e(A,{class:"d-flex align-center"},{default:t(()=>[a[12]||(a[12]=s("span",null,"Transaction History",-1)),e(V),e(u,{variant:"outlined",size:"small","prepend-icon":"mdi-download"},{default:t(()=>[...a[11]||(a[11]=[n("Export",-1)])]),_:1})]),_:1}),e(m,null,{default:t(()=>[s("div",tt,[e(M,{modelValue:g.value,"onUpdate:modelValue":a[0]||(a[0]=l=>g.value=l),variant:"outlined",density:"compact"},{default:t(()=>[e(u,{value:""},{default:t(()=>[...a[13]||(a[13]=[n("All",-1)])]),_:1}),e(u,{value:"credit"},{default:t(()=>[...a[14]||(a[14]=[n("Credits",-1)])]),_:1}),e(u,{value:"debit"},{default:t(()=>[...a[15]||(a[15]=[n("Debits",-1)])]),_:1})]),_:1},8,["modelValue"])]),e(E,{headers:$,items:r.transactions?.data||[],"items-per-page":-1,hover:""},{"item.reference":t(({item:l})=>[s("span",et,o(l.reference),1)]),"item.type":t(({item:l})=>[e(C,{color:l.type==="credit"?"success":"error",size:"small",variant:"tonal"},{default:t(()=>[e(b,{start:"",size:"small"},{default:t(()=>[n(o(l.type==="credit"?"mdi-arrow-down":"mdi-arrow-up"),1)]),_:2},1024),n(" "+o(l.type),1)]),_:2},1032,["color"])]),"item.category":t(({item:l})=>[e(C,{size:"small",variant:"outlined"},{default:t(()=>[n(o(l.category),1)]),_:2},1024)]),"item.amount":t(({item:l})=>[s("span",{class:H([l.type==="credit"?"text-success":"text-error","font-weight-bold"])},o(l.type==="credit"?"+":"-")+o(d(l.amount)),3)]),"item.balance_after":t(({item:l})=>[n(o(d(l.balance_after)),1)]),"item.created_at":t(({item:l})=>[n(o(new Date(l.created_at).toLocaleString()),1)]),"item.actions":t(({item:l})=>[e(u,{size:"small",variant:"text",color:"primary",href:`/customer/transactions/${l.id}`,icon:"mdi-eye",title:"View Details"},null,8,["href"]),e(u,{size:"small",variant:"text",color:"secondary",href:`/customer/transactions/${l.id}?print=1`,icon:"mdi-printer",title:"Print Receipt"},null,8,["href"])]),bottom:t(()=>[...a[16]||(a[16]=[])]),_:1},8,["items"]),s("div",at,[s("span",lt," Showing "+o(((r.transactions?.current_page||1)-1)*(r.transactions?.per_page||15)+1)+" to "+o(Math.min((r.transactions?.current_page||1)*(r.transactions?.per_page||15),r.transactions?.total||0))+" of "+o(r.transactions?.total||0)+" results ",1),e(W,{modelValue:y.value,"onUpdate:modelValue":[a[1]||(a[1]=l=>y.value=l),P],length:S.value,"total-visible":7,density:"comfortable"},null,8,["modelValue","length"])])]),_:1})]),_:1})]),_:1},8,["user","wallet"])],64)}}});export{rt as default};
