import{d as M,m as c,s as J,n as K,q as U,r as i,c as O,o as z,a as e,u as Q,h as W,w as t,b as d,e as o,t as s,j as X,k as Y,F as Z}from"./app-B6bp-6Tn.js";import{_ as ee}from"./CustomerLayout.vue_vue_type_script_setup_true_lang-dVhBGC3F.js";import"./index-p5wq9x94.js";const te={class:"d-flex align-center mb-6"},ae={class:"bg-grey-lighten-4 pa-1 rounded"},le={class:"font-weight-medium"},oe={class:"d-flex align-center justify-space-between mt-4"},ie={class:"text-caption text-grey"},de=M({__name:"History",props:{user:{},verifications:{},services:{},filters:{}},setup(r){const v=r,g=c(v.filters?.service||""),y=c(v.filters?.status||""),V=c(v.filters?.date_from||""),x=c(v.filters?.date_to||""),b=c(v.verifications?.current_page||1),w=c(!1),u=c(null),A=J(()=>v.verifications?.last_page||1);K([g,y,V,x],([n,a,k,m])=>{b.value=1,U.get("/customer/history",{service:n||void 0,status:a||void 0,date_from:k||void 0,date_to:m||void 0,page:1},{preserveState:!0,replace:!0})});const T=n=>{b.value=n,U.get("/customer/history",{service:g.value||void 0,status:y.value||void 0,date_from:V.value||void 0,date_to:x.value||void 0,page:n},{preserveState:!0,replace:!0})},B=n=>{u.value=n,w.value=!0},D=n=>new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN",minimumFractionDigits:0}).format(n||0),E=[{title:"Service",key:"service"},{title:"Search Parameter",key:"search_parameter"},{title:"Status",key:"status"},{title:"Amount",key:"amount_charged"},{title:"Date",key:"created_at"},{title:"",key:"actions",sortable:!1}];return(n,a)=>{const k=i("v-spacer"),m=i("v-btn"),N=i("v-select"),S=i("v-col"),h=i("v-text-field"),H=i("v-row"),F=i("v-chip"),C=i("v-icon"),R=i("v-data-table"),j=i("v-pagination"),$=i("v-card-text"),P=i("v-card"),G=i("v-card-title"),f=i("v-list-item-title"),_=i("v-list-item-subtitle"),p=i("v-list-item"),q=i("v-list"),I=i("v-card-actions"),L=i("v-dialog");return z(),O(Z,null,[e(Q(W),{title:"Verification History - EaseVerifier"}),e(ee,{user:n.$page.props.auth.user,wallet:n.$page.props.auth.wallet},{default:t(()=>[d("div",te,[a[8]||(a[8]=d("div",null,[d("h1",{class:"text-h4 font-weight-bold mb-1"},"Verification History"),d("p",{class:"text-body-2 text-grey"},"View all your past verifications")],-1)),e(k),e(m,{variant:"outlined","prepend-icon":"mdi-download"},{default:t(()=>[...a[7]||(a[7]=[o("Export",-1)])]),_:1})]),e(P,null,{default:t(()=>[e($,null,{default:t(()=>[e(H,{class:"mb-4"},{default:t(()=>[e(S,{cols:"12",sm:"6",md:"3"},{default:t(()=>[e(N,{modelValue:g.value,"onUpdate:modelValue":a[0]||(a[0]=l=>g.value=l),items:[{title:"All Services",value:""},...(r.services||[]).map(l=>({title:l.name,value:l.id}))],label:"Service",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","items"])]),_:1}),e(S,{cols:"12",sm:"6",md:"3"},{default:t(()=>[e(N,{modelValue:y.value,"onUpdate:modelValue":a[1]||(a[1]=l=>y.value=l),items:[{title:"All Status",value:""},{title:"Completed",value:"completed"},{title:"Failed",value:"failed"},{title:"Pending",value:"pending"}],label:"Status",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),e(S,{cols:"12",sm:"6",md:"3"},{default:t(()=>[e(h,{modelValue:V.value,"onUpdate:modelValue":a[2]||(a[2]=l=>V.value=l),label:"From Date",type:"date",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),e(S,{cols:"12",sm:"6",md:"3"},{default:t(()=>[e(h,{modelValue:x.value,"onUpdate:modelValue":a[3]||(a[3]=l=>x.value=l),label:"To Date",type:"date",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),e(R,{headers:E,items:r.verifications?.data||[],"items-per-page":-1,hover:""},{"item.service":t(({item:l})=>[e(F,{size:"small",variant:"tonal",color:"primary"},{default:t(()=>[o(s(l.verification_service?.name||"N/A"),1)]),_:2},1024)]),"item.search_parameter":t(({item:l})=>[d("code",ae,s(l.search_parameter),1)]),"item.status":t(({item:l})=>[e(F,{color:l.status==="completed"?"success":l.status==="pending"?"warning":"error",size:"small"},{default:t(()=>[e(C,{start:"",size:"small"},{default:t(()=>[o(s(l.status==="completed"?"mdi-check-circle":l.status==="pending"?"mdi-clock":"mdi-close-circle"),1)]),_:2},1024),o(" "+s(l.status),1)]),_:2},1032,["color"])]),"item.amount_charged":t(({item:l})=>[d("span",le,s(D(l.amount_charged)),1)]),"item.created_at":t(({item:l})=>[o(s(new Date(l.created_at).toLocaleString()),1)]),"item.actions":t(({item:l})=>[e(m,{icon:"",variant:"text",size:"small",onClick:se=>B(l)},{default:t(()=>[e(C,null,{default:t(()=>[...a[9]||(a[9]=[o("mdi-eye",-1)])]),_:1})]),_:1},8,["onClick"]),e(m,{icon:"",variant:"text",size:"small",href:`/customer/verification/${l.id}`},{default:t(()=>[e(C,null,{default:t(()=>[...a[10]||(a[10]=[o("mdi-open-in-new",-1)])]),_:1})]),_:1},8,["href"])]),bottom:t(()=>[...a[11]||(a[11]=[])]),_:1},8,["items"]),d("div",oe,[d("span",ie," Showing "+s(((r.verifications?.current_page||1)-1)*(r.verifications?.per_page||20)+1)+" to "+s(Math.min((r.verifications?.current_page||1)*(r.verifications?.per_page||20),r.verifications?.total||0))+" of "+s(r.verifications?.total||0)+" results ",1),e(j,{modelValue:b.value,"onUpdate:modelValue":[a[4]||(a[4]=l=>b.value=l),T],length:A.value,"total-visible":7,density:"comfortable"},null,8,["modelValue","length"])])]),_:1})]),_:1}),e(L,{modelValue:w.value,"onUpdate:modelValue":a[6]||(a[6]=l=>w.value=l),"max-width":"600"},{default:t(()=>[u.value?(z(),X(P,{key:0},{default:t(()=>[e(G,{class:"d-flex align-center"},{default:t(()=>[e(C,{color:"primary",class:"mr-2"},{default:t(()=>[...a[12]||(a[12]=[o("mdi-shield-check",-1)])]),_:1}),a[13]||(a[13]=o(" Verification Details ",-1))]),_:1}),e($,null,{default:t(()=>[e(q,{density:"compact"},{default:t(()=>[e(p,null,{default:t(()=>[e(f,{class:"text-caption"},{default:t(()=>[...a[14]||(a[14]=[o("Reference",-1)])]),_:1}),e(_,null,{default:t(()=>[o(s(u.value.reference),1)]),_:1})]),_:1}),e(p,null,{default:t(()=>[e(f,{class:"text-caption"},{default:t(()=>[...a[15]||(a[15]=[o("Service",-1)])]),_:1}),e(_,null,{default:t(()=>[o(s(u.value.verification_service?.name),1)]),_:1})]),_:1}),e(p,null,{default:t(()=>[e(f,{class:"text-caption"},{default:t(()=>[...a[16]||(a[16]=[o("Search Parameter",-1)])]),_:1}),e(_,null,{default:t(()=>[o(s(u.value.search_parameter),1)]),_:1})]),_:1}),e(p,null,{default:t(()=>[e(f,{class:"text-caption"},{default:t(()=>[...a[17]||(a[17]=[o("Amount Charged",-1)])]),_:1}),e(_,null,{default:t(()=>[o(s(D(u.value.amount_charged)),1)]),_:1})]),_:1}),e(p,null,{default:t(()=>[e(f,{class:"text-caption"},{default:t(()=>[...a[18]||(a[18]=[o("Response Time",-1)])]),_:1}),e(_,null,{default:t(()=>[o(s(u.value.response_time_ms)+"ms",1)]),_:1})]),_:1})]),_:1})]),_:1}),e(I,null,{default:t(()=>[e(k),e(m,{variant:"text",onClick:a[5]||(a[5]=l=>w.value=!1)},{default:t(()=>[...a[19]||(a[19]=[o("Close",-1)])]),_:1}),e(m,{color:"primary",href:`/customer/verification/${u.value.id}`},{default:t(()=>[...a[20]||(a[20]=[o("View Full Result",-1)])]),_:1},8,["href"])]),_:1})]),_:1})):Y("",!0)]),_:1},8,["modelValue"])]),_:1},8,["user","wallet"])],64)}}});export{de as default};
