import{d as M,i as y,u as A,j as R,k as q,r as s,c as H,o as J,a as t,b as r,h as K,w as l,e as o,t as i,f as n,F as O}from"./app-BrN8JC1Z.js";import{_ as P}from"./AdminLayout.vue_vue_type_script_setup_true_lang-DKRFZSpb.js";import"./index-Dz1Zefys.js";const Q={class:"text-h3 font-weight-bold mb-0"},X={class:"text-h3 font-weight-bold mb-0"},Y={class:"d-flex align-center py-2"},Z={class:"font-weight-medium mb-0"},h={class:"text-caption text-grey"},ee={class:"font-weight-bold text-primary"},te={class:"text-success"},le={class:"mb-4"},ae={class:"mb-4"},ie=M({__name:"Index",props:{user:{},wallets:{},totalBalance:{},totalBonusBalance:{},filters:{}},setup(x){const V=y(x.filters?.search||""),v=y(!1),f=y(!1),c=y(null),d=A({amount:0,description:"",is_bonus:!1}),m=A({amount:0,description:""});R(V,u=>{q.get("/admin/wallets",{search:u},{preserveState:!0,replace:!0})});const F=u=>{c.value=u,v.value=!0},S=u=>{c.value=u,f.value=!0},W=()=>{d.post(`/admin/customers/${c.value.user_id}/wallet/credit`,{onSuccess:()=>{v.value=!1,d.reset()}})},G=()=>{m.post(`/admin/customers/${c.value.user_id}/wallet/debit`,{onSuccess:()=>{f.value=!1,m.reset()}})},g=u=>new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN",minimumFractionDigits:0}).format(u||0),z=[{title:"Customer",key:"user"},{title:"Balance",key:"balance"},{title:"Bonus",key:"bonus_balance"},{title:"Last Updated",key:"updated_at"},{title:"Actions",key:"actions",sortable:!1}];return(u,e)=>{const _=s("v-card-text"),b=s("v-card"),k=s("v-col"),T=s("v-row"),C=s("v-text-field"),I=s("v-avatar"),w=s("v-icon"),p=s("v-btn"),L=s("v-data-table"),B=s("v-card-title"),D=s("v-textarea"),j=s("v-checkbox"),N=s("v-spacer"),U=s("v-card-actions"),$=s("v-dialog");return J(),H(O,null,[t(r(K),{title:"Wallets - Admin"}),t(P,{user:u.$page.props.auth.user},{default:l(()=>[e[26]||(e[26]=o("div",{class:"d-flex align-center mb-6"},[o("div",null,[o("h1",{class:"text-h4 font-weight-bold mb-1"},"Wallets"),o("p",{class:"text-body-2 text-grey"},"Manage customer wallet balances")])],-1)),t(T,{class:"mb-6"},{default:l(()=>[t(k,{cols:"12",md:"6"},{default:l(()=>[t(b,{color:"primary"},{default:l(()=>[t(_,{class:"text-white"},{default:l(()=>[e[10]||(e[10]=o("p",{class:"text-overline opacity-80"},"Total Balance (All Wallets)",-1)),o("p",Q,i(g(x.totalBalance)),1)]),_:1})]),_:1})]),_:1}),t(k,{cols:"12",md:"6"},{default:l(()=>[t(b,{color:"secondary"},{default:l(()=>[t(_,{class:"text-white"},{default:l(()=>[e[11]||(e[11]=o("p",{class:"text-overline opacity-80"},"Total Bonus Balance",-1)),o("p",X,i(g(x.totalBonusBalance)),1)]),_:1})]),_:1})]),_:1})]),_:1}),t(b,null,{default:l(()=>[t(_,null,{default:l(()=>[t(C,{modelValue:V.value,"onUpdate:modelValue":e[0]||(e[0]=a=>V.value=a),"prepend-inner-icon":"mdi-magnify",label:"Search wallets...",variant:"outlined",density:"compact","hide-details":"",class:"mb-4",style:{"max-width":"400px"}},null,8,["modelValue"]),t(L,{headers:z,items:x.wallets?.data||[],hover:""},{"item.user":l(({item:a})=>[o("div",Y,[t(I,{color:"primary",size:"36",class:"mr-3"},{default:l(()=>[n(i(a.user?.name?.charAt(0)||"?"),1)]),_:2},1024),o("div",null,[o("p",Z,i(a.user?.name||"N/A"),1),o("p",h,i(a.user?.email),1)])])]),"item.balance":l(({item:a})=>[o("span",ee,i(g(a.balance)),1)]),"item.bonus_balance":l(({item:a})=>[o("span",te,i(g(a.bonus_balance)),1)]),"item.updated_at":l(({item:a})=>[n(i(new Date(a.updated_at).toLocaleString()),1)]),"item.actions":l(({item:a})=>[t(p,{size:"small",variant:"tonal",color:"success",class:"mr-2",onClick:E=>F(a)},{default:l(()=>[t(w,{start:""},{default:l(()=>[...e[12]||(e[12]=[n("mdi-plus",-1)])]),_:1}),e[13]||(e[13]=n("Credit ",-1))]),_:1},8,["onClick"]),t(p,{size:"small",variant:"tonal",color:"error",onClick:E=>S(a)},{default:l(()=>[t(w,{start:""},{default:l(()=>[...e[14]||(e[14]=[n("mdi-minus",-1)])]),_:1}),e[15]||(e[15]=n("Debit ",-1))]),_:1},8,["onClick"])]),_:1},8,["items"])]),_:1})]),_:1}),t($,{modelValue:v.value,"onUpdate:modelValue":e[5]||(e[5]=a=>v.value=a),"max-width":"500"},{default:l(()=>[t(b,null,{default:l(()=>[t(B,{class:"d-flex align-center"},{default:l(()=>[t(w,{color:"success",class:"mr-2"},{default:l(()=>[...e[16]||(e[16]=[n("mdi-wallet-plus",-1)])]),_:1}),e[17]||(e[17]=n("Credit Wallet",-1))]),_:1}),t(_,null,{default:l(()=>[o("p",le,[e[18]||(e[18]=n("Credit wallet for ",-1)),o("strong",null,i(c.value?.user?.name),1)]),t(C,{modelValue:r(d).amount,"onUpdate:modelValue":e[1]||(e[1]=a=>r(d).amount=a),label:"Amount (NGN)",type:"number","prepend-inner-icon":"mdi-currency-ngn",variant:"outlined",class:"mb-4"},null,8,["modelValue"]),t(D,{modelValue:r(d).description,"onUpdate:modelValue":e[2]||(e[2]=a=>r(d).description=a),label:"Description",variant:"outlined",rows:"2",class:"mb-4"},null,8,["modelValue"]),t(j,{modelValue:r(d).is_bonus,"onUpdate:modelValue":e[3]||(e[3]=a=>r(d).is_bonus=a),label:"Credit as bonus",color:"primary"},null,8,["modelValue"])]),_:1}),t(U,null,{default:l(()=>[t(N),t(p,{variant:"text",onClick:e[4]||(e[4]=a=>v.value=!1)},{default:l(()=>[...e[19]||(e[19]=[n("Cancel",-1)])]),_:1}),t(p,{color:"success",loading:r(d).processing,onClick:W},{default:l(()=>[...e[20]||(e[20]=[n("Credit",-1)])]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t($,{modelValue:f.value,"onUpdate:modelValue":e[9]||(e[9]=a=>f.value=a),"max-width":"500"},{default:l(()=>[t(b,null,{default:l(()=>[t(B,{class:"d-flex align-center"},{default:l(()=>[t(w,{color:"error",class:"mr-2"},{default:l(()=>[...e[21]||(e[21]=[n("mdi-wallet-minus",-1)])]),_:1}),e[22]||(e[22]=n("Debit Wallet",-1))]),_:1}),t(_,null,{default:l(()=>[o("p",ae,[e[23]||(e[23]=n("Debit wallet for ",-1)),o("strong",null,i(c.value?.user?.name),1)]),t(C,{modelValue:r(m).amount,"onUpdate:modelValue":e[6]||(e[6]=a=>r(m).amount=a),label:"Amount (NGN)",type:"number","prepend-inner-icon":"mdi-currency-ngn",variant:"outlined",class:"mb-4"},null,8,["modelValue"]),t(D,{modelValue:r(m).description,"onUpdate:modelValue":e[7]||(e[7]=a=>r(m).description=a),label:"Reason",variant:"outlined",rows:"2"},null,8,["modelValue"])]),_:1}),t(U,null,{default:l(()=>[t(N),t(p,{variant:"text",onClick:e[8]||(e[8]=a=>f.value=!1)},{default:l(()=>[...e[24]||(e[24]=[n("Cancel",-1)])]),_:1}),t(p,{color:"error",loading:r(m).processing,onClick:G},{default:l(()=>[...e[25]||(e[25]=[n("Debit",-1)])]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["user"])],64)}}});export{ie as default};
