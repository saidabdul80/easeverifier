import{d as E,j as b,k as P,m as j,r as s,c as G,o as I,a as e,u as K,h as R,w as a,b as n,e as i,t as o,B as L,x as O,F as q,n as z}from"./app-cosHoKij.js";import{_ as H}from"./CustomerLayout.vue_vue_type_script_setup_true_lang-TMacBVLI.js";import"./index-p5wq9x94.js";const J={class:"d-flex align-center mb-6"},Q={class:"text-h6 font-weight-bold text-success mb-0"},W={class:"text-h6 font-weight-bold text-error mb-0"},X={class:"text-h6 font-weight-bold mb-0"},Y={class:"text-h6 font-weight-bold mb-0"},Z={class:"d-flex flex-wrap align-center ga-4 mb-4"},tt={class:"font-weight-medium text-primary"},et={class:"d-flex align-center justify-space-between mt-4"},at={class:"text-caption text-grey"},st=E({__name:"Index",props:{transactions:{},stats:{},filters:{}},setup(r){const u=r,x=b(u.filters?.search||""),p=b(u.filters?.type||""),v=b(u.filters?.category||""),f=b(u.filters?.min_amount||""),w=b(u.transactions?.current_page||1),T=P(()=>u.transactions?.last_page||1),V=()=>{w.value=1,z.get("/customer/transactions",{search:x.value||void 0,type:p.value||void 0,category:v.value||void 0,min_amount:f.value||void 0,page:1},{preserveState:!0,replace:!0})};j([p,v,f],()=>V());const A=d=>{w.value=d,z.get("/customer/transactions",{search:x.value||void 0,type:p.value||void 0,category:v.value||void 0,min_amount:f.value||void 0,page:d},{preserveState:!0,replace:!0})},c=d=>new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN",minimumFractionDigits:0}).format(d||0),D=[{title:"Reference",key:"reference"},{title:"Type",key:"type"},{title:"Category",key:"category"},{title:"Amount",key:"amount"},{title:"Balance After",key:"balance_after"},{title:"Date",key:"created_at"},{title:"Actions",key:"actions",sortable:!1}],N=[{title:"All Categories",value:""},{title:"Funding",value:"funding"},{title:"Verification",value:"verification"},{title:"Refund",value:"refund"},{title:"Bonus",value:"bonus"}];return(d,t)=>{const B=s("v-spacer"),m=s("v-btn"),g=s("v-icon"),_=s("v-card-text"),y=s("v-card"),h=s("v-col"),F=s("v-row"),C=s("v-text-field"),S=s("v-btn-toggle"),U=s("v-select"),k=s("v-chip"),$=s("v-data-table"),M=s("v-pagination");return I(),G(q,null,[e(K(R),{title:"Transactions - EaseVerifier"}),e(H,{user:d.$page.props.auth?.user,wallet:d.$page.props.auth?.wallet},{default:a(()=>[n("div",J,[t[6]||(t[6]=n("div",null,[n("h1",{class:"text-h4 font-weight-bold mb-1"},"Transactions"),n("p",{class:"text-body-2 text-grey"},"View and manage all your transactions")],-1)),e(B),e(m,{variant:"outlined","prepend-icon":"mdi-download"},{default:a(()=>[...t[5]||(t[5]=[i("Export",-1)])]),_:1})]),e(F,{class:"mb-6"},{default:a(()=>[e(h,{cols:"6",md:"3"},{default:a(()=>[e(y,{color:"success-lighten-5"},{default:a(()=>[e(_,{class:"d-flex align-center"},{default:a(()=>[e(g,{color:"success",size:"32",class:"mr-3"},{default:a(()=>[...t[7]||(t[7]=[i("mdi-arrow-down-circle",-1)])]),_:1}),n("div",null,[t[8]||(t[8]=n("p",{class:"text-caption mb-0"},"Total Credits",-1)),n("p",Q,o(c(r.stats?.total_credits)),1)])]),_:1})]),_:1})]),_:1}),e(h,{cols:"6",md:"3"},{default:a(()=>[e(y,{color:"error-lighten-5"},{default:a(()=>[e(_,{class:"d-flex align-center"},{default:a(()=>[e(g,{color:"error",size:"32",class:"mr-3"},{default:a(()=>[...t[9]||(t[9]=[i("mdi-arrow-up-circle",-1)])]),_:1}),n("div",null,[t[10]||(t[10]=n("p",{class:"text-caption mb-0"},"Total Debits",-1)),n("p",W,o(c(r.stats?.total_debits)),1)])]),_:1})]),_:1})]),_:1}),e(h,{cols:"6",md:"3"},{default:a(()=>[e(y,null,{default:a(()=>[e(_,{class:"d-flex align-center"},{default:a(()=>[e(g,{color:"success",size:"32",class:"mr-3"},{default:a(()=>[...t[11]||(t[11]=[i("mdi-calendar-month",-1)])]),_:1}),n("div",null,[t[12]||(t[12]=n("p",{class:"text-caption mb-0"},"This Month Credits",-1)),n("p",X,o(c(r.stats?.this_month_credits)),1)])]),_:1})]),_:1})]),_:1}),e(h,{cols:"6",md:"3"},{default:a(()=>[e(y,null,{default:a(()=>[e(_,{class:"d-flex align-center"},{default:a(()=>[e(g,{color:"error",size:"32",class:"mr-3"},{default:a(()=>[...t[13]||(t[13]=[i("mdi-calendar-month",-1)])]),_:1}),n("div",null,[t[14]||(t[14]=n("p",{class:"text-caption mb-0"},"This Month Debits",-1)),n("p",Y,o(c(r.stats?.this_month_debits)),1)])]),_:1})]),_:1})]),_:1})]),_:1}),e(y,null,{default:a(()=>[e(_,null,{default:a(()=>[n("div",Z,[e(C,{modelValue:x.value,"onUpdate:modelValue":t[0]||(t[0]=l=>x.value=l),"prepend-inner-icon":"mdi-magnify",label:"Search reference...",variant:"outlined",density:"compact","hide-details":"",style:{"max-width":"250px"},onKeyup:L(V,["enter"])},null,8,["modelValue"]),e(S,{modelValue:p.value,"onUpdate:modelValue":t[1]||(t[1]=l=>p.value=l),variant:"outlined",density:"compact"},{default:a(()=>[e(m,{value:""},{default:a(()=>[...t[15]||(t[15]=[i("All",-1)])]),_:1}),e(m,{value:"credit"},{default:a(()=>[...t[16]||(t[16]=[i("Credits",-1)])]),_:1}),e(m,{value:"debit"},{default:a(()=>[...t[17]||(t[17]=[i("Debits",-1)])]),_:1})]),_:1},8,["modelValue"]),e(U,{modelValue:v.value,"onUpdate:modelValue":t[2]||(t[2]=l=>v.value=l),items:N,"item-title":"title","item-value":"value",label:"Category",variant:"outlined",density:"compact","hide-details":"",style:{"max-width":"180px"}},null,8,["modelValue"]),e(C,{modelValue:f.value,"onUpdate:modelValue":t[3]||(t[3]=l=>f.value=l),"prepend-inner-icon":"mdi-currency-ngn",label:"Min Amount",variant:"outlined",density:"compact","hide-details":"",type:"number",style:{"max-width":"150px"}},null,8,["modelValue"])]),e($,{headers:D,items:r.transactions?.data||[],"items-per-page":-1,hover:""},{"item.reference":a(({item:l})=>[n("span",tt,o(l.reference),1)]),"item.type":a(({item:l})=>[e(k,{color:l.type==="credit"?"success":"error",size:"small",variant:"tonal"},{default:a(()=>[e(g,{start:"",size:"small"},{default:a(()=>[i(o(l.type==="credit"?"mdi-arrow-down":"mdi-arrow-up"),1)]),_:2},1024),i(" "+o(l.type),1)]),_:2},1032,["color"])]),"item.category":a(({item:l})=>[e(k,{size:"small",variant:"outlined"},{default:a(()=>[i(o(l.category),1)]),_:2},1024)]),"item.amount":a(({item:l})=>[n("span",{class:O([l.type==="credit"?"text-success":"text-error","font-weight-bold"])},o(l.type==="credit"?"+":"-")+o(c(l.amount)),3)]),"item.balance_after":a(({item:l})=>[i(o(c(l.balance_after)),1)]),"item.created_at":a(({item:l})=>[i(o(new Date(l.created_at).toLocaleString()),1)]),"item.actions":a(({item:l})=>[e(m,{size:"small",variant:"text",color:"primary",href:`/customer/transactions/${l.id}`,icon:"mdi-eye"},null,8,["href"]),e(m,{size:"small",variant:"text",color:"secondary",href:`/customer/transactions/${l.id}?print=1`,icon:"mdi-printer"},null,8,["href"])]),bottom:a(()=>[...t[18]||(t[18]=[])]),_:1},8,["items"]),n("div",et,[n("span",at," Showing "+o(((r.transactions?.current_page||1)-1)*(r.transactions?.per_page||20)+1)+" to "+o(Math.min((r.transactions?.current_page||1)*(r.transactions?.per_page||20),r.transactions?.total||0))+" of "+o(r.transactions?.total||0)+" results ",1),e(M,{modelValue:w.value,"onUpdate:modelValue":[t[4]||(t[4]=l=>w.value=l),A],length:T.value,"total-visible":7,density:"comfortable"},null,8,["modelValue","length"])])]),_:1})]),_:1})]),_:1},8,["user","wallet"])],64)}}});export{st as default};
