import{d as q,i as m,j as J,k as K,l as U,r as i,c as O,o as z,a as e,b as Q,h as W,w as t,e as d,f as o,t as s,n as X,p as Y,F as Z}from"./app-CzCLs3up.js";import{_ as ee}from"./CustomerLayout.vue_vue_type_script_setup_true_lang-Drfarla3.js";import"./index-Dz1Zefys.js";const te={class:"d-flex align-center mb-6"},le={class:"bg-grey-lighten-4 pa-1 rounded"},ae={class:"font-weight-medium"},oe={class:"d-flex align-center justify-space-between mt-4"},ie={class:"text-caption text-grey"},de=q({__name:"History",props:{user:{},verifications:{},services:{},filters:{}},setup(r){const v=r,g=m(v.filters?.service||""),y=m(v.filters?.status||""),V=m(v.filters?.date_from||""),x=m(v.filters?.date_to||""),b=m(v.verifications?.current_page||1),w=m(!1),u=m(null),A=J(()=>v.verifications?.last_page||1);K([g,y,V,x],([n,l,k,c])=>{b.value=1,U.get("/customer/history",{service:n||void 0,status:l||void 0,date_from:k||void 0,date_to:c||void 0,page:1},{preserveState:!0,replace:!0})});const T=n=>{b.value=n,U.get("/customer/history",{service:g.value||void 0,status:y.value||void 0,date_from:V.value||void 0,date_to:x.value||void 0,page:n},{preserveState:!0,replace:!0})},B=n=>{u.value=n,w.value=!0},D=n=>new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN",minimumFractionDigits:0}).format(n||0),E=[{title:"Service",key:"service"},{title:"Search Parameter",key:"search_parameter"},{title:"Status",key:"status"},{title:"Amount",key:"amount_charged"},{title:"Date",key:"created_at"},{title:"",key:"actions",sortable:!1}];return(n,l)=>{const k=i("v-spacer"),c=i("v-btn"),N=i("v-select"),S=i("v-col"),h=i("v-text-field"),H=i("v-row"),F=i("v-chip"),C=i("v-icon"),R=i("v-data-table"),j=i("v-pagination"),$=i("v-card-text"),P=i("v-card"),G=i("v-card-title"),f=i("v-list-item-title"),_=i("v-list-item-subtitle"),p=i("v-list-item"),I=i("v-list"),L=i("v-card-actions"),M=i("v-dialog");return z(),O(Z,null,[e(Q(W),{title:"Verification History - EaseVerifier"}),e(ee,{user:n.$page.props.auth.user,wallet:n.$page.props.auth.wallet},{default:t(()=>[d("div",te,[l[8]||(l[8]=d("div",null,[d("h1",{class:"text-h4 font-weight-bold mb-1"},"Verification History"),d("p",{class:"text-body-2 text-grey"},"View all your past verifications")],-1)),e(k),e(c,{variant:"outlined","prepend-icon":"mdi-download"},{default:t(()=>[...l[7]||(l[7]=[o("Export",-1)])]),_:1})]),e(P,null,{default:t(()=>[e($,null,{default:t(()=>[e(H,{class:"mb-4"},{default:t(()=>[e(S,{cols:"12",sm:"6",md:"3"},{default:t(()=>[e(N,{modelValue:g.value,"onUpdate:modelValue":l[0]||(l[0]=a=>g.value=a),items:[{title:"All Services",value:""},...(r.services||[]).map(a=>({title:a.name,value:a.id}))],label:"Service",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","items"])]),_:1}),e(S,{cols:"12",sm:"6",md:"3"},{default:t(()=>[e(N,{modelValue:y.value,"onUpdate:modelValue":l[1]||(l[1]=a=>y.value=a),items:[{title:"All Status",value:""},{title:"Completed",value:"completed"},{title:"Failed",value:"failed"},{title:"Pending",value:"pending"}],label:"Status",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),e(S,{cols:"12",sm:"6",md:"3"},{default:t(()=>[e(h,{modelValue:V.value,"onUpdate:modelValue":l[2]||(l[2]=a=>V.value=a),label:"From Date",type:"date",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),e(S,{cols:"12",sm:"6",md:"3"},{default:t(()=>[e(h,{modelValue:x.value,"onUpdate:modelValue":l[3]||(l[3]=a=>x.value=a),label:"To Date",type:"date",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),e(R,{headers:E,items:r.verifications?.data||[],"items-per-page":-1,hover:""},{"item.service":t(({item:a})=>[e(F,{size:"small",variant:"tonal",color:"primary"},{default:t(()=>[o(s(a.verification_service?.name||"N/A"),1)]),_:2},1024)]),"item.search_parameter":t(({item:a})=>[d("code",le,s(a.search_parameter),1)]),"item.status":t(({item:a})=>[e(F,{color:a.status==="completed"?"success":a.status==="pending"?"warning":"error",size:"small"},{default:t(()=>[e(C,{start:"",size:"small"},{default:t(()=>[o(s(a.status==="completed"?"mdi-check-circle":a.status==="pending"?"mdi-clock":"mdi-close-circle"),1)]),_:2},1024),o(" "+s(a.status),1)]),_:2},1032,["color"])]),"item.amount_charged":t(({item:a})=>[d("span",ae,s(D(a.amount_charged)),1)]),"item.created_at":t(({item:a})=>[o(s(new Date(a.created_at).toLocaleString()),1)]),"item.actions":t(({item:a})=>[e(c,{icon:"",variant:"text",size:"small",onClick:se=>B(a)},{default:t(()=>[e(C,null,{default:t(()=>[...l[9]||(l[9]=[o("mdi-eye",-1)])]),_:1})]),_:1},8,["onClick"]),e(c,{icon:"",variant:"text",size:"small",href:`/customer/verification/${a.id}`},{default:t(()=>[e(C,null,{default:t(()=>[...l[10]||(l[10]=[o("mdi-open-in-new",-1)])]),_:1})]),_:1},8,["href"])]),bottom:t(()=>[...l[11]||(l[11]=[])]),_:1},8,["items"]),d("div",oe,[d("span",ie," Showing "+s(((r.verifications?.current_page||1)-1)*(r.verifications?.per_page||20)+1)+" to "+s(Math.min((r.verifications?.current_page||1)*(r.verifications?.per_page||20),r.verifications?.total||0))+" of "+s(r.verifications?.total||0)+" results ",1),e(j,{modelValue:b.value,"onUpdate:modelValue":[l[4]||(l[4]=a=>b.value=a),T],length:A.value,"total-visible":7,density:"comfortable"},null,8,["modelValue","length"])])]),_:1})]),_:1}),e(M,{modelValue:w.value,"onUpdate:modelValue":l[6]||(l[6]=a=>w.value=a),"max-width":"600"},{default:t(()=>[u.value?(z(),X(P,{key:0},{default:t(()=>[e(G,{class:"d-flex align-center"},{default:t(()=>[e(C,{color:"primary",class:"mr-2"},{default:t(()=>[...l[12]||(l[12]=[o("mdi-shield-check",-1)])]),_:1}),l[13]||(l[13]=o(" Verification Details ",-1))]),_:1}),e($,null,{default:t(()=>[e(I,{density:"compact"},{default:t(()=>[e(p,null,{default:t(()=>[e(f,{class:"text-caption"},{default:t(()=>[...l[14]||(l[14]=[o("Reference",-1)])]),_:1}),e(_,null,{default:t(()=>[o(s(u.value.reference),1)]),_:1})]),_:1}),e(p,null,{default:t(()=>[e(f,{class:"text-caption"},{default:t(()=>[...l[15]||(l[15]=[o("Service",-1)])]),_:1}),e(_,null,{default:t(()=>[o(s(u.value.verification_service?.name),1)]),_:1})]),_:1}),e(p,null,{default:t(()=>[e(f,{class:"text-caption"},{default:t(()=>[...l[16]||(l[16]=[o("Search Parameter",-1)])]),_:1}),e(_,null,{default:t(()=>[o(s(u.value.search_parameter),1)]),_:1})]),_:1}),e(p,null,{default:t(()=>[e(f,{class:"text-caption"},{default:t(()=>[...l[17]||(l[17]=[o("Amount Charged",-1)])]),_:1}),e(_,null,{default:t(()=>[o(s(D(u.value.amount_charged)),1)]),_:1})]),_:1}),e(p,null,{default:t(()=>[e(f,{class:"text-caption"},{default:t(()=>[...l[18]||(l[18]=[o("Response Time",-1)])]),_:1}),e(_,null,{default:t(()=>[o(s(u.value.response_time_ms)+"ms",1)]),_:1})]),_:1})]),_:1})]),_:1}),e(L,null,{default:t(()=>[e(k),e(c,{variant:"text",onClick:l[5]||(l[5]=a=>w.value=!1)},{default:t(()=>[...l[19]||(l[19]=[o("Close",-1)])]),_:1}),e(c,{color:"primary",href:`/customer/verification/${u.value.id}`},{default:t(()=>[...l[20]||(l[20]=[o("View Full Result",-1)])]),_:1},8,["href"])]),_:1})]),_:1})):Y("",!0)]),_:1},8,["modelValue"])]),_:1},8,["user","wallet"])],64)}}});export{de as default};
