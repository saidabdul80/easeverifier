import{d as F,i as w,j as B,k as P,l as V,r as i,c as U,o as j,a,b as E,h as G,w as t,e as o,f as n,t as l,v as I,F as $}from"./app-DpDICM9z.js";import{_ as L}from"./AdminLayout.vue_vue_type_script_setup_true_lang-CNWn1e1U.js";import"./index-Dz1Zefys.js";const M={class:"d-flex align-center mb-6"},R={class:"text-h6 font-weight-bold text-success mb-0"},q={class:"text-h6 font-weight-bold text-error mb-0"},H={class:"text-h6 font-weight-bold mb-0"},J={class:"text-h6 font-weight-bold mb-0"},K={class:"d-flex align-center ga-4 mb-4"},O={class:"font-weight-medium text-primary"},Q={class:"d-flex align-center justify-space-between mt-4"},W={class:"text-caption text-grey"},tt=F({__name:"Index",props:{user:{},transactions:{},stats:{},filters:{}},setup(r){const f=r,v=w(f.filters?.search||""),_=w(f.filters?.type||""),g=w(f.transactions?.current_page||1),h=B(()=>f.transactions?.last_page||1);P([v,_],([d,e])=>{g.value=1,V.get("/admin/transactions",{search:d||void 0,type:e||void 0,page:1},{preserveState:!0,replace:!0})});const k=d=>{g.value=d,V.get("/admin/transactions",{search:v.value||void 0,type:_.value||void 0,page:d},{preserveState:!0,replace:!0})},c=d=>new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN",minimumFractionDigits:0}).format(d||0),C=[{title:"Reference",key:"reference"},{title:"Customer",key:"user"},{title:"Type",key:"type"},{title:"Category",key:"category"},{title:"Amount",key:"amount"},{title:"Status",key:"status"},{title:"Date",key:"created_at"}];return(d,e)=>{const T=i("v-spacer"),y=i("v-btn"),u=i("v-icon"),m=i("v-card-text"),p=i("v-card"),b=i("v-col"),z=i("v-row"),N=i("v-text-field"),D=i("v-btn-toggle"),x=i("v-chip"),S=i("v-data-table"),A=i("v-pagination");return j(),U($,null,[a(E(G),{title:"Transactions - Admin"}),a(L,{user:d.$page.props.auth.user},{default:t(()=>[o("div",M,[e[4]||(e[4]=o("div",null,[o("h1",{class:"text-h4 font-weight-bold mb-1"},"Transactions"),o("p",{class:"text-body-2 text-grey"},"View all platform transactions")],-1)),a(T),a(y,{variant:"outlined","prepend-icon":"mdi-download"},{default:t(()=>[...e[3]||(e[3]=[n("Export",-1)])]),_:1})]),a(z,{class:"mb-6"},{default:t(()=>[a(b,{cols:"6",md:"3"},{default:t(()=>[a(p,{color:"success-lighten-5"},{default:t(()=>[a(m,{class:"d-flex align-center"},{default:t(()=>[a(u,{color:"success",size:"32",class:"mr-3"},{default:t(()=>[...e[5]||(e[5]=[n("mdi-arrow-down-circle",-1)])]),_:1}),o("div",null,[e[6]||(e[6]=o("p",{class:"text-caption mb-0"},"Total Credits",-1)),o("p",R,l(c(r.stats?.total_credits)),1)])]),_:1})]),_:1})]),_:1}),a(b,{cols:"6",md:"3"},{default:t(()=>[a(p,{color:"error-lighten-5"},{default:t(()=>[a(m,{class:"d-flex align-center"},{default:t(()=>[a(u,{color:"error",size:"32",class:"mr-3"},{default:t(()=>[...e[7]||(e[7]=[n("mdi-arrow-up-circle",-1)])]),_:1}),o("div",null,[e[8]||(e[8]=o("p",{class:"text-caption mb-0"},"Total Debits",-1)),o("p",q,l(c(r.stats?.total_debits)),1)])]),_:1})]),_:1})]),_:1}),a(b,{cols:"6",md:"3"},{default:t(()=>[a(p,null,{default:t(()=>[a(m,{class:"d-flex align-center"},{default:t(()=>[a(u,{color:"success",size:"32",class:"mr-3"},{default:t(()=>[...e[9]||(e[9]=[n("mdi-calendar-today",-1)])]),_:1}),o("div",null,[e[10]||(e[10]=o("p",{class:"text-caption mb-0"},"Today Credits",-1)),o("p",H,l(c(r.stats?.today_credits)),1)])]),_:1})]),_:1})]),_:1}),a(b,{cols:"6",md:"3"},{default:t(()=>[a(p,null,{default:t(()=>[a(m,{class:"d-flex align-center"},{default:t(()=>[a(u,{color:"error",size:"32",class:"mr-3"},{default:t(()=>[...e[11]||(e[11]=[n("mdi-calendar-today",-1)])]),_:1}),o("div",null,[e[12]||(e[12]=o("p",{class:"text-caption mb-0"},"Today Debits",-1)),o("p",J,l(c(r.stats?.today_debits)),1)])]),_:1})]),_:1})]),_:1})]),_:1}),a(p,null,{default:t(()=>[a(m,null,{default:t(()=>[o("div",K,[a(N,{modelValue:v.value,"onUpdate:modelValue":e[0]||(e[0]=s=>v.value=s),"prepend-inner-icon":"mdi-magnify",label:"Search...",variant:"outlined",density:"compact","hide-details":"",style:{"max-width":"300px"}},null,8,["modelValue"]),a(D,{modelValue:_.value,"onUpdate:modelValue":e[1]||(e[1]=s=>_.value=s),variant:"outlined",density:"compact"},{default:t(()=>[a(y,{value:""},{default:t(()=>[...e[13]||(e[13]=[n("All",-1)])]),_:1}),a(y,{value:"credit"},{default:t(()=>[...e[14]||(e[14]=[n("Credits",-1)])]),_:1}),a(y,{value:"debit"},{default:t(()=>[...e[15]||(e[15]=[n("Debits",-1)])]),_:1})]),_:1},8,["modelValue"])]),a(S,{headers:C,items:r.transactions?.data||[],"items-per-page":-1,hover:""},{"item.reference":t(({item:s})=>[o("span",O,l(s.reference),1)]),"item.user":t(({item:s})=>[n(l(s.user?.name||"N/A"),1)]),"item.type":t(({item:s})=>[a(x,{color:s.type==="credit"?"success":"error",size:"small",variant:"tonal"},{default:t(()=>[a(u,{start:"",size:"small"},{default:t(()=>[n(l(s.type==="credit"?"mdi-arrow-down":"mdi-arrow-up"),1)]),_:2},1024),n(" "+l(s.type),1)]),_:2},1032,["color"])]),"item.category":t(({item:s})=>[a(x,{size:"small",variant:"outlined"},{default:t(()=>[n(l(s.category),1)]),_:2},1024)]),"item.amount":t(({item:s})=>[o("span",{class:I([s.type==="credit"?"text-success":"text-error","font-weight-medium"])},l(s.type==="credit"?"+":"-")+l(c(s.amount)),3)]),"item.status":t(({item:s})=>[a(x,{color:s.status==="completed"?"success":s.status==="pending"?"warning":"error",size:"small"},{default:t(()=>[n(l(s.status),1)]),_:2},1032,["color"])]),"item.created_at":t(({item:s})=>[n(l(new Date(s.created_at).toLocaleString()),1)]),bottom:t(()=>[...e[16]||(e[16]=[])]),_:1},8,["items"]),o("div",Q,[o("span",W," Showing "+l(((r.transactions?.current_page||1)-1)*(r.transactions?.per_page||20)+1)+" to "+l(Math.min((r.transactions?.current_page||1)*(r.transactions?.per_page||20),r.transactions?.total||0))+" of "+l(r.transactions?.total||0)+" results ",1),a(A,{modelValue:g.value,"onUpdate:modelValue":[e[2]||(e[2]=s=>g.value=s),k],length:h.value,"total-visible":7,density:"comfortable"},null,8,["modelValue","length"])])]),_:1})]),_:1})]),_:1},8,["user"])],64)}}});export{tt as default};
