import{d as T,j as g,k as W,g as E,m as J,n as k,r as l,c as L,o as q,a,u as m,h as H,w as o,b as s,e as n,t as r,F as K}from"./app-ByfILzDQ.js";import{_ as O}from"./AdminLayout.vue_vue_type_script_setup_true_lang-B9UlEEUn.js";import"./index-p5wq9x94.js";const Q={class:"d-flex align-center mb-6"},R={class:"d-flex align-center py-2"},X={class:"font-weight-medium mb-0"},Y={class:"text-caption text-grey"},Z={class:"font-weight-bold text-primary"},ee={class:"d-flex align-center justify-space-between mt-4"},te={class:"text-caption text-grey"},ae={class:"mb-4"},re=T({__name:"Index",props:{user:{},customers:{},filters:{}},setup(d){const b=d,v=g(b.filters?.search||""),_=g(b.customers?.current_page||1),p=g(!1),y=g(null),N=W(()=>b.customers?.last_page||1),u=E({amount:0,description:"",is_bonus:!1});J(v,i=>{_.value=1,k.get("/admin/customers",{search:i||void 0,page:1},{preserveState:!0,replace:!0})});const S=i=>{_.value=i,k.get("/admin/customers",{search:v.value||void 0,page:i},{preserveState:!0,replace:!0})},h=i=>{y.value=i,p.value=!0},D=()=>{u.post(`/admin/customers/${y.value.id}/wallet/credit`,{onSuccess:()=>{p.value=!1,u.reset()}})},$=i=>new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN",minimumFractionDigits:0}).format(i||0),A=[{title:"Customer",key:"name"},{title:"Company",key:"company"},{title:"Wallet Balance",key:"balance"},{title:"Status",key:"status"},{title:"Joined",key:"created_at"},{title:"Actions",key:"actions",sortable:!1}];return(i,e)=>{const x=l("v-spacer"),c=l("v-btn"),C=l("v-text-field"),F=l("v-avatar"),U=l("v-chip"),f=l("v-icon"),z=l("v-data-table"),B=l("v-pagination"),V=l("v-card-text"),w=l("v-card"),G=l("v-card-title"),I=l("v-textarea"),P=l("v-checkbox"),j=l("v-card-actions"),M=l("v-dialog");return q(),L(K,null,[a(m(H),{title:"Customers - Admin"}),a(O,{user:i.$page.props.auth.user},{default:o(()=>[s("div",Q,[e[8]||(e[8]=s("div",null,[s("h1",{class:"text-h4 font-weight-bold mb-1"},"Customers"),s("p",{class:"text-body-2 text-grey"},"Manage your platform customers")],-1)),a(x),a(c,{color:"primary","prepend-icon":"mdi-plus",href:"/admin/customers/create"},{default:o(()=>[...e[7]||(e[7]=[n("Add Customer",-1)])]),_:1})]),a(w,null,{default:o(()=>[a(V,null,{default:o(()=>[a(C,{modelValue:v.value,"onUpdate:modelValue":e[0]||(e[0]=t=>v.value=t),"prepend-inner-icon":"mdi-magnify",label:"Search customers...",variant:"outlined",density:"compact","hide-details":"",class:"mb-4",style:{"max-width":"400px"}},null,8,["modelValue"]),a(z,{headers:A,items:d.customers?.data||[],"items-per-page":-1,hover:""},{"item.name":o(({item:t})=>[s("div",R,[a(F,{color:"primary",size:"36",class:"mr-3"},{default:o(()=>[n(r(t.name?.charAt(0)||"?"),1)]),_:2},1024),s("div",null,[s("p",X,r(t.name),1),s("p",Y,r(t.email),1)])])]),"item.company":o(({item:t})=>[n(r(t.customer?.company_name||"-"),1)]),"item.balance":o(({item:t})=>[s("span",Z,r($(t.wallet?.balance)),1)]),"item.status":o(({item:t})=>[a(U,{color:t.is_active?"success":"error",size:"small"},{default:o(()=>[n(r(t.is_active?"Active":"Inactive"),1)]),_:2},1032,["color"])]),"item.created_at":o(({item:t})=>[n(r(new Date(t.created_at).toLocaleDateString()),1)]),"item.actions":o(({item:t})=>[a(c,{icon:"",variant:"text",size:"small",href:`/admin/customers/${t.id}`},{default:o(()=>[a(f,null,{default:o(()=>[...e[9]||(e[9]=[n("mdi-eye",-1)])]),_:1})]),_:1},8,["href"]),a(c,{icon:"",variant:"text",size:"small",href:`/admin/customers/${t.id}/edit`},{default:o(()=>[a(f,null,{default:o(()=>[...e[10]||(e[10]=[n("mdi-pencil",-1)])]),_:1})]),_:1},8,["href"]),a(c,{icon:"",variant:"text",size:"small",color:"success",onClick:oe=>h(t)},{default:o(()=>[a(f,null,{default:o(()=>[...e[11]||(e[11]=[n("mdi-wallet-plus",-1)])]),_:1})]),_:1},8,["onClick"])]),bottom:o(()=>[...e[12]||(e[12]=[])]),_:1},8,["items"]),s("div",ee,[s("span",te," Showing "+r(((d.customers?.current_page||1)-1)*(d.customers?.per_page||15)+1)+" to "+r(Math.min((d.customers?.current_page||1)*(d.customers?.per_page||15),d.customers?.total||0))+" of "+r(d.customers?.total||0)+" results ",1),a(B,{modelValue:_.value,"onUpdate:modelValue":[e[1]||(e[1]=t=>_.value=t),S],length:N.value,"total-visible":7,density:"comfortable"},null,8,["modelValue","length"])])]),_:1})]),_:1}),a(M,{modelValue:p.value,"onUpdate:modelValue":e[6]||(e[6]=t=>p.value=t),"max-width":"500"},{default:o(()=>[a(w,null,{default:o(()=>[a(G,{class:"d-flex align-center"},{default:o(()=>[a(f,{color:"success",class:"mr-2"},{default:o(()=>[...e[13]||(e[13]=[n("mdi-wallet-plus",-1)])]),_:1}),e[14]||(e[14]=n("Credit Wallet",-1))]),_:1}),a(V,null,{default:o(()=>[s("p",ae,[e[15]||(e[15]=n("Credit wallet for ",-1)),s("strong",null,r(y.value?.name),1)]),a(C,{modelValue:m(u).amount,"onUpdate:modelValue":e[2]||(e[2]=t=>m(u).amount=t),label:"Amount (NGN)",type:"number","prepend-inner-icon":"mdi-currency-ngn",variant:"outlined",class:"mb-4"},null,8,["modelValue"]),a(I,{modelValue:m(u).description,"onUpdate:modelValue":e[3]||(e[3]=t=>m(u).description=t),label:"Description",variant:"outlined",rows:"2",class:"mb-4"},null,8,["modelValue"]),a(P,{modelValue:m(u).is_bonus,"onUpdate:modelValue":e[4]||(e[4]=t=>m(u).is_bonus=t),label:"Credit as bonus",color:"primary"},null,8,["modelValue"])]),_:1}),a(j,null,{default:o(()=>[a(x),a(c,{variant:"text",onClick:e[5]||(e[5]=t=>p.value=!1)},{default:o(()=>[...e[16]||(e[16]=[n("Cancel",-1)])]),_:1}),a(c,{color:"success",loading:m(u).processing,onClick:D},{default:o(()=>[...e[17]||(e[17]=[n("Credit",-1)])]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["user"])],64)}}});export{re as default};
