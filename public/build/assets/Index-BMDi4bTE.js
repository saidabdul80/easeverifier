import{d as B,i as f,u as G,j as I,k as W,r as o,c as j,o as E,a as t,b as i,h as J,w as l,e as s,f as n,t as d,F as L}from"./app-COaOSKoI.js";import{_ as M}from"./AdminLayout.vue_vue_type_script_setup_true_lang-jC1nLA55.js";import"./index-Dz1Zefys.js";const T={class:"d-flex align-center mb-6"},q={class:"d-flex align-center py-2"},H={class:"font-weight-medium mb-0"},K={class:"text-caption text-grey"},O={class:"font-weight-bold text-primary"},P={class:"mb-4"},ee=B({__name:"Index",props:{user:{},customers:{},filters:{}},setup(b){const _=f(b.filters?.search||""),c=f(!1),v=f(null),r=G({amount:0,description:"",is_bonus:!1});I(_,u=>{W.get("/admin/customers",{search:u},{preserveState:!0,replace:!0})});const V=u=>{v.value=u,c.value=!0},w=()=>{r.post(`/admin/customers/${v.value.id}/wallet/credit`,{onSuccess:()=>{c.value=!1,r.reset()}})},k=u=>new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN",minimumFractionDigits:0}).format(u||0),N=[{title:"Customer",key:"name"},{title:"Company",key:"company"},{title:"Wallet Balance",key:"balance"},{title:"Status",key:"status"},{title:"Joined",key:"created_at"},{title:"Actions",key:"actions",sortable:!1}];return(u,e)=>{const y=o("v-spacer"),m=o("v-btn"),x=o("v-text-field"),D=o("v-avatar"),$=o("v-chip"),p=o("v-icon"),A=o("v-data-table"),g=o("v-card-text"),C=o("v-card"),F=o("v-card-title"),S=o("v-textarea"),z=o("v-checkbox"),U=o("v-card-actions"),h=o("v-dialog");return E(),j(L,null,[t(i(J),{title:"Customers - Admin"}),t(M,{user:u.$page.props.auth.user},{default:l(()=>[s("div",T,[e[7]||(e[7]=s("div",null,[s("h1",{class:"text-h4 font-weight-bold mb-1"},"Customers"),s("p",{class:"text-body-2 text-grey"},"Manage your platform customers")],-1)),t(y),t(m,{color:"primary","prepend-icon":"mdi-plus",href:"/admin/customers/create"},{default:l(()=>[...e[6]||(e[6]=[n("Add Customer",-1)])]),_:1})]),t(C,null,{default:l(()=>[t(g,null,{default:l(()=>[t(x,{modelValue:_.value,"onUpdate:modelValue":e[0]||(e[0]=a=>_.value=a),"prepend-inner-icon":"mdi-magnify",label:"Search customers...",variant:"outlined",density:"compact","hide-details":"",class:"mb-4",style:{"max-width":"400px"}},null,8,["modelValue"]),t(A,{headers:N,items:b.customers?.data||[],hover:""},{"item.name":l(({item:a})=>[s("div",q,[t(D,{color:"primary",size:"36",class:"mr-3"},{default:l(()=>[n(d(a.name?.charAt(0)||"?"),1)]),_:2},1024),s("div",null,[s("p",H,d(a.name),1),s("p",K,d(a.email),1)])])]),"item.company":l(({item:a})=>[n(d(a.customer?.company_name||"-"),1)]),"item.balance":l(({item:a})=>[s("span",O,d(k(a.wallet?.balance)),1)]),"item.status":l(({item:a})=>[t($,{color:a.is_active?"success":"error",size:"small"},{default:l(()=>[n(d(a.is_active?"Active":"Inactive"),1)]),_:2},1032,["color"])]),"item.created_at":l(({item:a})=>[n(d(new Date(a.created_at).toLocaleDateString()),1)]),"item.actions":l(({item:a})=>[t(m,{icon:"",variant:"text",size:"small",href:`/admin/customers/${a.id}`},{default:l(()=>[t(p,null,{default:l(()=>[...e[8]||(e[8]=[n("mdi-eye",-1)])]),_:1})]),_:1},8,["href"]),t(m,{icon:"",variant:"text",size:"small",href:`/admin/customers/${a.id}/edit`},{default:l(()=>[t(p,null,{default:l(()=>[...e[9]||(e[9]=[n("mdi-pencil",-1)])]),_:1})]),_:1},8,["href"]),t(m,{icon:"",variant:"text",size:"small",color:"success",onClick:R=>V(a)},{default:l(()=>[t(p,null,{default:l(()=>[...e[10]||(e[10]=[n("mdi-wallet-plus",-1)])]),_:1})]),_:1},8,["onClick"])]),_:1},8,["items"])]),_:1})]),_:1}),t(h,{modelValue:c.value,"onUpdate:modelValue":e[5]||(e[5]=a=>c.value=a),"max-width":"500"},{default:l(()=>[t(C,null,{default:l(()=>[t(F,{class:"d-flex align-center"},{default:l(()=>[t(p,{color:"success",class:"mr-2"},{default:l(()=>[...e[11]||(e[11]=[n("mdi-wallet-plus",-1)])]),_:1}),e[12]||(e[12]=n("Credit Wallet",-1))]),_:1}),t(g,null,{default:l(()=>[s("p",P,[e[13]||(e[13]=n("Credit wallet for ",-1)),s("strong",null,d(v.value?.name),1)]),t(x,{modelValue:i(r).amount,"onUpdate:modelValue":e[1]||(e[1]=a=>i(r).amount=a),label:"Amount (NGN)",type:"number","prepend-inner-icon":"mdi-currency-ngn",variant:"outlined",class:"mb-4"},null,8,["modelValue"]),t(S,{modelValue:i(r).description,"onUpdate:modelValue":e[2]||(e[2]=a=>i(r).description=a),label:"Description",variant:"outlined",rows:"2",class:"mb-4"},null,8,["modelValue"]),t(z,{modelValue:i(r).is_bonus,"onUpdate:modelValue":e[3]||(e[3]=a=>i(r).is_bonus=a),label:"Credit as bonus",color:"primary"},null,8,["modelValue"])]),_:1}),t(U,null,{default:l(()=>[t(y),t(m,{variant:"text",onClick:e[4]||(e[4]=a=>c.value=!1)},{default:l(()=>[...e[14]||(e[14]=[n("Cancel",-1)])]),_:1}),t(m,{color:"success",loading:i(r).processing,onClick:w},{default:l(()=>[...e[15]||(e[15]=[n("Credit",-1)])]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["user"])],64)}}});export{ee as default};
